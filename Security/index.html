
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ioterop.github.io/IOWA/Security/">
      
      
      <link rel="shortcut icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>Security - IOWA documentation (Lite)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#security" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ioterop.github.io/IOWA/" title="IOWA documentation (Lite)" class="md-header-nav__button md-logo" aria-label="IOWA documentation (Lite)">
      
  <img src="../assets/iowa_logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            IOWA documentation (Lite)
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Security
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/IOTEROP/IOWA/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ioterop.github.io/IOWA/" title="IOWA documentation (Lite)" class="md-nav__button md-logo" aria-label="IOWA documentation (Lite)">
      
  <img src="../assets/iowa_logo.png" alt="logo">

    </a>
    IOWA documentation (Lite)
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/IOTEROP/IOWA/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../License/" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Changelog/" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../LwM2MOverview/" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../EvaluationKit/" class="md-nav__link">
      Evaluation Kit
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../AbstractionLayer/" class="md-nav__link">
      Abstraction Layer
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CommonAPI/" class="md-nav__link">
      Common APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ClientAPI/" class="md-nav__link">
      Client APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ServerAPI/" class="md-nav__link">
      Server APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../BootstrapServerAPI/" class="md-nav__link">
      Bootstrap Server APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../UtilsAPI/" class="md-nav__link">
      Utils APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DeprecatedAPI/" class="md-nav__link">
      Deprecated APIs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../OpenSourceLicenses/" class="md-nav__link">
      OpenSource Licenses
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#security-layers" class="md-nav__link">
    Security layers
  </a>
  
    <nav class="md-nav" aria-label="Security layers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mbed-tls" class="md-nav__link">
    mbed TLS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tinydtls" class="md-nav__link">
    tinydtls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-implementation" class="md-nav__link">
    Custom implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-the-security-in-iowa" class="md-nav__link">
    How to use the security in IOWA
  </a>
  
    <nav class="md-nav" aria-label="How to use the security in IOWA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-side" class="md-nav__link">
    Client side
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side" class="md-nav__link">
    Server side
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-your-security-implementation" class="md-nav__link">
    Providing your security implementation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-implementation-abstraction-functions" class="md-nav__link">
    Security Implementation Abstraction Functions
  </a>
  
    <nav class="md-nav" aria-label="Security Implementation Abstraction Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_create_client_session" class="md-nav__link">
    iowa_user_security_create_client_session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_create_server_session" class="md-nav__link">
    iowa_user_security_create_server_session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_delete_session" class="md-nav__link">
    iowa_user_security_delete_session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_handle_handshake_packet" class="md-nav__link">
    iowa_user_security_handle_handshake_packet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_step" class="md-nav__link">
    iowa_user_security_step
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_send" class="md-nav__link">
    iowa_user_security_send
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_recv" class="md-nav__link">
    iowa_user_security_recv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_disconnect" class="md-nav__link">
    iowa_user_security_disconnect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_hkdf" class="md-nav__link">
    iowa_user_security_HKDF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_aead_encrypt" class="md-nav__link">
    iowa_user_security_AEAD_encrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_user_security_aead_decrypt" class="md-nav__link">
    iowa_user_security_AEAD_decrypt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data types
  </a>
  
    <nav class="md-nav" aria-label="Data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_t" class="md-nav__link">
    iowa_security_session_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_mode_t" class="md-nav__link">
    iowa_security_mode_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_cert_usage_mode_t" class="md-nav__link">
    iowa_cert_usage_mode_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_state_t" class="md-nav__link">
    iowa_security_state_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_event_t" class="md-nav__link">
    iowa_security_event_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_hash_t" class="md-nav__link">
    iowa_security_hash_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_aead_t" class="md-nav__link">
    iowa_security_aead_t
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    Helper Functions
  </a>
  
    <nav class="md-nav" aria-label="Helper Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_set_user_internals" class="md-nav__link">
    iowa_security_session_set_user_internals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_user_internals" class="md-nav__link">
    iowa_security_session_get_user_internals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_state" class="md-nav__link">
    iowa_security_session_get_state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_set_state" class="md-nav__link">
    iowa_security_session_set_state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_get_server_session" class="md-nav__link">
    iowa_security_get_server_session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_get_client_session" class="md-nav__link">
    iowa_security_get_client_session
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_generate_event" class="md-nav__link">
    iowa_security_session_generate_event
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_connection_type" class="md-nav__link">
    iowa_security_session_get_connection_type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_security_mode" class="md-nav__link">
    iowa_security_session_get_security_mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_uri" class="md-nav__link">
    iowa_security_session_get_uri
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_set_step_delay" class="md-nav__link">
    iowa_security_session_set_step_delay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_context" class="md-nav__link">
    iowa_security_session_get_context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_session_get_context_user_data" class="md-nav__link">
    iowa_security_session_get_context_user_data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_connection_send" class="md-nav__link">
    iowa_security_connection_send
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa_security_connection_recv" class="md-nav__link">
    iowa_security_connection_recv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/IOTEROP/IOWA/edit/master/docs/Security.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h1>
<p>To enable the Security, [<code>IOWA_SECURITY_LAYER</code>][IOWA_SECURITY_LAYER] must not be set to <strong>IOWA_SECURITY_LAYER_NONE</strong>.</p>
<p>IOWA supports two security layers and add the ability to provide your security layer:</p>
<ul>
<li>mbed TLS: https://tls.mbed.org/</li>
<li>tinydtls: https://projects.eclipse.org/projects/iot.tinydtls</li>
<li>Custom implementation</li>
</ul>
<p>Additionally, IOWA supports the following security mode with their possible cipher suites (by priority order):</p>
<ul>
<li>OSCORE: AES128-CCM8 and AES128-CBCSHA256,</li>
<li>Pre-Shared Key: AES128-CCM8 and AES128-CBCSHA256,</li>
<li>Raw Public Key: AES128-CCM8 and AES128-CBCSHA256,</li>
<li>X.509 (Certificate): AES128-CCM8 and AES128-CBCSHA256.</li>
</ul>
<h2 id="security-layers">Security layers<a class="headerlink" href="#security-layers" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Warning:</strong> There is currently an incompatibility between tinydtls and mbed TLS. Thus A tinydtls client can not connect to mbed TLS server.</p>
<p>The recommended security layer to use is mbed TLS.</p>
</blockquote>
<h3 id="mbed-tls">mbed TLS<a class="headerlink" href="#mbed-tls" title="Permanent link">&para;</a></h3>
<p>To use mbed TLS as the security layer, [<code>IOWA_SECURITY_LAYER</code>][IOWA_SECURITY_LAYER] can be set with the following defines:</p>
<ul>
<li><em>IOWA_SECURITY_LAYER_MBEDTLS_OSCORE_ONLY</em> supports only OSCORE mode,</li>
<li><em>IOWA_SECURITY_LAYER_MBEDTLS_PSK_ONLY</em> supports Pre-Shared Key mode. Imply supporting OSCORE.</li>
<li><em>IOWA_SECURITY_LAYER_MBEDTLS</em> supports OSCORE, Pre-Shared Key and X.509 modes,</li>
</ul>
<p>These defines exist mainly for code size reduction if the application doesn't need to embed the whole mbed TLS stack.</p>
<p>Note that mbed TLS does not support Raw Public Key security mode.</p>
<h3 id="tinydtls">tinydtls<a class="headerlink" href="#tinydtls" title="Permanent link">&para;</a></h3>
<p>To use tinydtls as the security layer, [<code>IOWA_SECURITY_LAYER</code>][IOWA_SECURITY_LAYER] has to bet set to <strong>IOWA_SECURITY_LAYER_TINYDTLS</strong>.</p>
<p>Note that tinydtls does not support X.509 security mode.</p>
<h3 id="custom-implementation">Custom implementation<a class="headerlink" href="#custom-implementation" title="Permanent link">&para;</a></h3>
<p>To use your security implementation, [<code>IOWA_SECURITY_LAYER</code>][IOWA_SECURITY_LAYER] has to bet set to <strong>IOWA_SECURITY_LAYER_USER</strong>.</p>
<p>Please refer to the [Providing your security implementation][Providing your security implementation] section for details.</p>
<h2 id="how-to-use-the-security-in-iowa">How to use the security in IOWA<a class="headerlink" href="#how-to-use-the-security-in-iowa" title="Permanent link">&para;</a></h2>
<p>Find below two examples that could help to understand how to enable encrypted connection between a LwM2M Client and a LwM2M Server.</p>
<h3 id="client-side">Client side<a class="headerlink" href="#client-side" title="Permanent link">&para;</a></h3>
<p>The following example shows how to use a certificate loaded from a file with the security layer mbed TLS. This is in complement of the Client sample using Pre-Shared Key.</p>
<p>The structure to contain the certificates:</p>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
    <span class="n">iowa_certificate_data_t</span> <span class="n">certData</span><span class="p">;</span>
<span class="p">}</span> <span class="n">application_data_t</span><span class="p">;</span>
</code></pre></div>

<p>The main implementation:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;iowa_client.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#define SERVER_URI &quot;coaps:</span><span class="c1">//localhost:5684&quot;</span>

<span class="cp">#define CERTIFICATES_FOLDER          &quot;certs&quot;</span>
<span class="cp">#define CA_CERTIFICATE_FILE          &quot;server.crt&quot;</span>
<span class="cp">#define CERTIFICATE_FILE             &quot;client.crt&quot;</span>
<span class="cp">#define CERTIFICATE_PRIVATE_KEY_FILE &quot;client.key&quot;</span>

<span class="kt">size_t</span> <span class="nf">read_certificate_file</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">certFolder</span><span class="p">,</span>
                             <span class="kt">char</span> <span class="o">*</span><span class="n">certFile</span><span class="p">,</span>
                             <span class="kt">uint8_t</span> <span class="o">**</span><span class="n">bufferP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">fileLength</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">certPath</span><span class="p">;</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="n">fileP</span><span class="p">;</span>

    <span class="n">fileLength</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">certPath</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">certFolder</span><span class="p">)</span> <span class="o">+</span> <span class="n">strlen</span><span class="p">(</span><span class="n">certFile</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">sprintf</span><span class="p">(</span><span class="n">certPath</span><span class="p">,</span> <span class="s">&quot;%s/%s&quot;</span><span class="p">,</span> <span class="n">certFolder</span><span class="p">,</span> <span class="n">certFile</span><span class="p">);</span>

    <span class="n">fileP</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">certPath</span><span class="p">,</span> <span class="s">&quot;rb&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fileP</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Error while opening the file: %s.</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">certPath</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">function_exit</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">fseek</span><span class="p">(</span><span class="n">fileP</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SEEK_END</span><span class="p">);</span>
    <span class="n">fileLength</span> <span class="o">=</span> <span class="n">ftell</span><span class="p">(</span><span class="n">fileP</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fileLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;File length is 0.</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">function_exit</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">fseek</span><span class="p">(</span><span class="n">fileP</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">);</span>

    <span class="o">*</span><span class="n">bufferP</span> <span class="o">=</span> <span class="n">iowa_system_malloc</span><span class="p">(</span><span class="n">fileLength</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">bufferP</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Memory allocation error.</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">goto</span> <span class="n">function_exit</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">fread</span><span class="p">(</span><span class="o">*</span><span class="n">bufferP</span><span class="p">,</span> <span class="n">fileLength</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fileP</span><span class="p">);</span>

<span class="nl">function_exit</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fileP</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">fileP</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">certPath</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">fileLength</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span>
         <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">iowa_context_t</span> <span class="n">iowaH</span><span class="p">;</span>
    <span class="n">iowa_status_t</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">application_data_t</span> <span class="n">clientData</span><span class="p">;</span>

    <span class="cm">/******************</span>
<span class="cm">     * Initialization</span>
<span class="cm">     */</span>

    <span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificateLength</span> <span class="o">=</span> <span class="n">read_certificate_file</span><span class="p">(</span><span class="n">CERTIFICATES_FOLDER</span><span class="p">,</span> <span class="n">CA_CERTIFICATE_FILE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificateLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLength</span> <span class="o">=</span> <span class="n">read_certificate_file</span><span class="p">(</span><span class="n">CERTIFICATES_FOLDER</span><span class="p">,</span> <span class="n">CERTIFICATE_FILE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKeyLength</span> <span class="o">=</span> <span class="n">read_certificate_file</span><span class="p">(</span><span class="n">CERTIFICATES_FOLDER</span><span class="p">,</span> <span class="n">CERTIFICATE_PRIVATE_KEY_FILE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKey</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKeyLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Initialize IOWA</span>
    <span class="n">iowaH</span> <span class="o">=</span> <span class="n">iowa_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">clientData</span><span class="p">);</span>

    <span class="n">iowa_client_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="s">&quot;IOWA_Client&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="n">iowa_client_add_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="n">SERVER_URI</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">IOWA_SEC_CERTIFICATE</span><span class="p">);</span>

    <span class="cm">/******************</span>
<span class="cm">     * &quot;Main loop&quot;</span>
<span class="cm">     */</span>

    <span class="k">do</span>
    <span class="p">{</span>
        <span class="c1">// Run for 4 seconds</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_step</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">)</span>

    <span class="n">iowa_client_remove_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">1234</span><span class="p">);</span>
    <span class="n">iowa_close</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>

    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKey</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>The Platform implementation:</p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_system_security_data</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">peerIdentity</span><span class="p">,</span>
                                        <span class="kt">size_t</span> <span class="n">peerIdentityLen</span><span class="p">,</span>
                                        <span class="n">iowa_security_operation_t</span> <span class="n">securityOp</span><span class="p">,</span>
                                        <span class="n">iowa_security_data_t</span> <span class="o">*</span><span class="n">securityDataP</span><span class="p">,</span>
                                        <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">application_data_t</span> <span class="o">*</span><span class="n">clientDataP</span><span class="p">;</span>

    <span class="n">clientDataP</span> <span class="o">=</span> <span class="p">(</span><span class="n">application_data_t</span> <span class="o">*</span><span class="p">)</span><span class="n">userDataP</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">securityOp</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="nl">IOWA_SEC_READ</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">securityMode</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="k">case</span> <span class="nl">IOWA_SEC_CERTIFICATE</span><span class="p">:</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">securityMode</span> <span class="o">=</span> <span class="n">IOWA_SEC_CERTIFICATE</span><span class="p">;</span>

            <span class="c1">// Copy the CA certificate</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">;</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificateLen</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificateLen</span><span class="p">;</span>

            <span class="c1">// Copy the certificate</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">;</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLen</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLen</span><span class="p">;</span>

            <span class="c1">// Copy the private key</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKey</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKey</span><span class="p">;</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKeyLen</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKeyLen</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>

        <span class="k">default</span><span class="o">:</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="server-side">Server side<a class="headerlink" href="#server-side" title="Permanent link">&para;</a></h3>
<p>The following example shows how to use a certificate loaded from a file with the security layer mbed TLS. This is in complement of the Server sample using Pres-Shared Key.</p>
<p>The example is nearly identical to the Client one, except that <a href="../AbstractionLayer/#iowa_system_security_data"><code>iowa_system_security_data</code></a> reads only the Server certificate and do not verify Client certificates.</p>
<p>The same structure and the same loading functions can be reused</p>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
    <span class="n">iowa_certificate_data_t</span> <span class="n">certData</span><span class="p">;</span>
<span class="p">}</span> <span class="n">application_data_t</span><span class="p">;</span>
</code></pre></div>

<p>The main implementation:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;iowa_server.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#define CERTIFICATES_FOLDER          &quot;certs&quot;</span>
<span class="cp">#define CERTIFICATE_FILE             &quot;server.crt&quot;</span>
<span class="cp">#define CERTIFICATE_PRIVATE_KEY_FILE &quot;server.key&quot;</span>

<span class="kt">size_t</span> <span class="nf">read_certificate_file</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">certFolder</span><span class="p">,</span>
                             <span class="kt">char</span> <span class="o">*</span><span class="n">certFile</span><span class="p">,</span>
                             <span class="kt">uint8_t</span> <span class="o">**</span><span class="n">bufferP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span>
         <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">iowa_context_t</span> <span class="n">iowaH</span><span class="p">;</span>
    <span class="n">iowa_status_t</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">application_data_t</span> <span class="n">clientData</span><span class="p">;</span>

    <span class="cm">/******************</span>
<span class="cm">     * Initialization</span>
<span class="cm">     */</span>

    <span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLength</span> <span class="o">=</span> <span class="n">read_certificate_file</span><span class="p">(</span><span class="n">CERTIFICATES_FOLDER</span><span class="p">,</span> <span class="n">CERTIFICATE_FILE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKeyLength</span> <span class="o">=</span> <span class="n">read_certificate_file</span><span class="p">(</span><span class="n">CERTIFICATES_FOLDER</span><span class="p">,</span> <span class="n">CERTIFICATE_PRIVATE_KEY_FILE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKey</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKeyLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">caCertificate</span><span class="p">);</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Initialize IOWA</span>
    <span class="n">iowaH</span> <span class="o">=</span> <span class="n">iowa_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">clientData</span><span class="p">);</span>

    <span class="n">iowa_server_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="cm">/******************</span>
<span class="cm">     * &quot;Main loop&quot;</span>
<span class="cm">     */</span>

    <span class="k">do</span>
    <span class="p">{</span>
        <span class="c1">// Run for 4 seconds</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_step</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">)</span>

    <span class="n">iowa_close</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>

    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">);</span>
    <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">clientData</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificatePrivateKey</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>The Platform implementation:</p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_system_security_data</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">peerIdentity</span><span class="p">,</span>
                                        <span class="kt">size_t</span> <span class="n">peerIdentityLen</span><span class="p">,</span>
                                        <span class="n">iowa_security_operation_t</span> <span class="n">securityOp</span><span class="p">,</span>
                                        <span class="n">iowa_security_data_t</span> <span class="o">*</span><span class="n">securityDataP</span><span class="p">,</span>
                                        <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">application_data_t</span> <span class="o">*</span><span class="n">clientDataP</span><span class="p">;</span>

    <span class="n">clientDataP</span> <span class="o">=</span> <span class="p">(</span><span class="n">application_data_t</span> <span class="o">*</span><span class="p">)</span><span class="n">userDataP</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">securityOp</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="nl">IOWA_SEC_READ</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">securityMode</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="k">case</span> <span class="nl">IOWA_SEC_CERTIFICATE</span><span class="p">:</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">securityMode</span> <span class="o">=</span> <span class="n">IOWA_SEC_CERTIFICATE</span><span class="p">;</span>

            <span class="c1">// Copy the certificate</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">certificate</span><span class="p">;</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLen</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">certificateLen</span><span class="p">;</span>

            <span class="c1">// Copy the private key</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKey</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKey</span><span class="p">;</span>
            <span class="n">securityDataP</span><span class="o">-&gt;</span><span class="n">protocol</span><span class="p">.</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKeyLen</span> <span class="o">=</span> <span class="n">clientDataP</span><span class="o">-&gt;</span><span class="n">certData</span><span class="p">.</span><span class="n">privateKeyLen</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>

        <span class="k">default</span><span class="o">:</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="providing-your-security-implementation">Providing your security implementation<a class="headerlink" href="#providing-your-security-implementation" title="Permanent link">&para;</a></h2>
<p>You can replace the provided mbed TLS or tinydtls with your TLS/DTLS implementation.</p>
<p>There are two ways to provide your security implementation: either you re-implement the whole Security component of IOWA as described in [IOWA Components][IOWA Components], or you can use the Security Implementation Abstraction described here.</p>
<p>To do this, first [<code>IOWA_SECURITY_LAYER</code>][IOWA_SECURITY_LAYER] must be set to <strong>IOWA_SECURITY_LAYER_USER</strong>. Then you must implement the abstraction functions defined in the file <em>include/iowa_security_user.h</em> and documented below.</p>
<p>Depending of your security implementation, you can set the two following defines in <em>iowa_config.h</em> to specify if the layer supports RPK and/or Certificate modes. By default, when <strong>IOWA_SECURITY_LAYER_USER</strong> is set, we considered that the two modes are not supported:</p>
<ul>
<li><code>#define IOWA_SECURITY_RAW_PUBLIC_KEY_SUPPORT</code></li>
<li><code>#define IOWA_SECURITY_CERTIFICATE_SUPPORT</code></li>
</ul>
<p>An example of such implementation is provided in the sample <em>user_security_client</em>.</p>
<h2 id="security-implementation-abstraction-functions">Security Implementation Abstraction Functions<a class="headerlink" href="#security-implementation-abstraction-functions" title="Permanent link">&para;</a></h2>
<h3 id="iowa_user_security_create_client_session">iowa_user_security_create_client_session<a class="headerlink" href="#iowa_user_security_create_client_session" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_user_security_create_client_session</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_create_client_session()</code> initializes implementation internals data of a new client-side security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to initialize.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_create_server_session">iowa_user_security_create_server_session<a class="headerlink" href="#iowa_user_security_create_server_session" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_user_security_create_server_session</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_create_server_session()</code> initializes implementation internals data of a new server-side security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to initialize.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_delete_session">iowa_user_security_delete_session<a class="headerlink" href="#iowa_user_security_delete_session" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_user_security_delete_session</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_delete_session()</code> deletes the implementation internals data of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to delete data from.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_handle_handshake_packet">iowa_user_security_handle_handshake_packet<a class="headerlink" href="#iowa_user_security_handle_handshake_packet" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_user_security_handle_handshake_packet</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_handle_handshake_packet()</code> is called by IOWA when there is incoming data to read while the security session is in the <strong>SECURITY_STATE_HANDSHAKING</strong> state.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session receiving data.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_step">iowa_user_security_step<a class="headerlink" href="#iowa_user_security_step" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_user_security_step</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_step()</code> performs the required operations on the security session: updating state, handling timeouts, etc...</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to update.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p><strong> Notes </strong></p>
<p>This function should update the IOWA context global timeout. See <a href="./#iowa_security_session_set_step_delay"><code>iowa_security_session_set_step_delay()</code></a>.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_send">iowa_user_security_send<a class="headerlink" href="#iowa_user_security_send" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span> <span class="nf">iowa_user_security_send</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                            <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                            <span class="kt">size_t</span> <span class="n">length</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_send()</code> encrypts and sends data on a connected security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to send data on.</p>
<p><em>buffer</em>
: The data to send.</p>
<p><em>length</em>
: The length of the data in bytes.</p>
<p><strong> Return Value </strong></p>
<p>The number of bytes sent or a negative number in case of error.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_recv">iowa_user_security_recv<a class="headerlink" href="#iowa_user_security_recv" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span> <span class="nf">iowa_user_security_recv</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                            <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                            <span class="kt">size_t</span> <span class="n">length</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_recv()</code> reads and decrypts data received on a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to receives data from.</p>
<p><em>buffer</em>
: A buffer to store the decrypted data.</p>
<p><em>length</em>
: The length of the buffer in bytes.</p>
<p><strong> Return Value </strong></p>
<p>The number of received bytes or a negative number in case of error.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_disconnect">iowa_user_security_disconnect<a class="headerlink" href="#iowa_user_security_disconnect" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_user_security_disconnect</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_disconnect()</code> disconnects a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session to disconnect.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_hkdf">iowa_user_security_HKDF<a class="headerlink" href="#iowa_user_security_hkdf" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span> <span class="nf">iowa_user_security_HKDF</span><span class="p">(</span><span class="n">iowa_security_hash_t</span> <span class="n">hash</span><span class="p">,</span>
                                      <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">IKM</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">IKMLength</span><span class="p">,</span>
                                      <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">salt</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">saltLength</span><span class="p">,</span>
                                      <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">infoLength</span><span class="p">,</span>
                                      <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">OKM</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">OKMLength</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_HKDF()</code> derives a new security key using HMAC-based Extract-and-Expand Key Derivation Function from <a href="https://tools.ietf.org/html/rfc5869">RFC 5869</a>.</p>
<p><strong> Arguments </strong></p>
<p><em>hash</em>
: The hash algorithm to use.</p>
<p><em>IKM</em>
: The input keying material.</p>
<p><em>IKMLength</em>
: The length in bytes of <em>IKM</em>.</p>
<p><em>salt</em>
: The salt value. This may be nil.</p>
<p><em>saltLength</em>
: The length in bytes of <em>salt</em>. This may be 0.</p>
<p><em>info</em>
: The context and application specific information. This may be nil.</p>
<p><em>infoLength</em>
: The length in bytes of <em>info</em>. This may be 0.</p>
<p><em>OKM</em>
: The buffer to store the compted output keying material.</p>
<p><em>OKMLength</em>
: The length in bytes of <em>OKM</em>.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_aead_encrypt">iowa_user_security_AEAD_encrypt<a class="headerlink" href="#iowa_user_security_aead_encrypt" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span>
    <span class="nf">iowa_user_security_AEAD_encrypt</span><span class="p">(</span><span class="n">iowa_security_aead_t</span> <span class="n">aead</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">keyLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">nonce</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nonceLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">aad</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">aadLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">plainData</span><span class="p">,</span>
                                    <span class="kt">size_t</span> <span class="n">plainDataLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">encryptedData</span><span class="p">,</span>
                                    <span class="kt">size_t</span> <span class="o">*</span><span class="n">encryptedDataLengthP</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">tag</span><span class="p">,</span>
                                    <span class="kt">size_t</span> <span class="n">tagLength</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_AEAD_encrypt()</code> encrypts data.</p>
<p><strong> Arguments </strong></p>
<p><em>aead</em>
: The AEAD algorithm to use.</p>
<p><em>key</em>
: The key to use to encrypt.</p>
<p><em>keyLength</em>
: The length in bytes of <em>key</em>.</p>
<p><em>nonce</em>
: The nonce to use. This may be nil.</p>
<p><em>nonceLength</em>
: The length in bytes of <em>nonce</em>. This may be 0.</p>
<p><em>aad</em>
: The additional data to authenticate. This may be nil.</p>
<p><em>aadLength</em>
: The length in bytes of <em>aad</em>. This may be 0.</p>
<p><em>plainData</em>
: The data to encrypt.</p>
<p><em>plainDataLength</em>
: The length in bytes of <em>plainData</em>.</p>
<p><em>encryptedData</em>
: The buffer to store the encrypted data.</p>
<p><em>encryptedDataLengthP</em>
: IN/OUT. The length in bytes of <em>encryptedData</em>. This may be modified by <code>iowa_user_security_AEAD_encrypt()</code>.</p>
<p><em>tag</em>
: A buffer to store the authentication tag. This may be nil.</p>
<p><em>tagLength</em>
: The length in bytes of <em>tag</em>. This may be 0.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h3 id="iowa_user_security_aead_decrypt">iowa_user_security_AEAD_decrypt<a class="headerlink" href="#iowa_user_security_aead_decrypt" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_status_t</span>
    <span class="nf">iowa_user_security_AEAD_decrypt</span><span class="p">(</span><span class="n">iowa_security_aead_t</span> <span class="n">aead</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">keyLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">nonce</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nonceLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">aad</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">aadLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">tag</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">tagLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">encryptedData</span><span class="p">,</span>
                                    <span class="kt">size_t</span> <span class="n">encryptedDataLength</span><span class="p">,</span>
                                    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">plainData</span><span class="p">,</span>
                                    <span class="kt">size_t</span> <span class="o">*</span><span class="n">plainDataLengthP</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_user_security_AEAD_decrypt()</code> decrypts data.</p>
<p><strong> Arguments </strong></p>
<p><em>aead</em>
: The AEAD algorithm to use.</p>
<p><em>key</em>
: The key to use to encrypt.</p>
<p><em>keyLength</em>
: The length in bytes of <em>key</em>.</p>
<p><em>nonce</em>
: The nonce to use. This may be nil.</p>
<p><em>nonceLength</em>
: The length in bytes of <em>nonce</em>. This may be 0.</p>
<p><em>aad</em>
: The additional data to authenticate. This may be nil.</p>
<p><em>aadLength</em>
: The length in bytes of <em>aad</em>. This may be 0.</p>
<p><em>tag</em>
: The authentication tag. This may be nil.</p>
<p><em>tagLength</em>
: The length in bytes of <em>tag</em>. This may be 0.</p>
<p><em>encryptedData</em>
: The data to decrypt.</p>
<p><em>encryptedDataLength</em>
: The length in bytes of <em>encryptedData</em>.</p>
<p><em>plainData</em>
: The buffer to store the decrypted data.</p>
<p><em>plainDataLengthP</em>
: IN/OUT. The length in bytes of <em>plainData</em>. This may be modified by <code>iowa_user_security_AEAD_decrypt()</code>.</p>
<p><strong> Return Value </strong></p>
<p><strong>IOWA_COAP_NO_ERROR</strong> in case of success or an error status.</p>
<p>\clearpage</p>
<h2 id="data-types">Data types<a class="headerlink" href="#data-types" title="Permanent link">&para;</a></h2>
<h3 id="iowa_security_session_t">iowa_security_session_t<a class="headerlink" href="#iowa_security_session_t" title="Permanent link">&para;</a></h3>
<p>This type is used to store the session of the IOWA security stack engine. Multiple sessions can exist at the same time. This can be treated as an opaque type and be used through the helper functions below.</p>
<h3 id="iowa_security_mode_t">iowa_security_mode_t<a class="headerlink" href="#iowa_security_mode_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="kt">uint8_t</span> <span class="n">iowa_security_mode_t</span><span class="p">;</span>
</code></pre></div>

<p>This contains the possible security mode for the Security layer. The following values are defined:</p>
<p>IOWA_SEC_PRE_SHARED_KEY
: Use the Pre-Shared Key mode of the security layer.</p>
<p>IOWA_SEC_RAW_PUBLIC_KEY
: Use the Private/Public Key mode of the security layer.</p>
<p>IOWA_SEC_CERTIFICATE
: Use the X.509 Certificate mode of the security layer.</p>
<p>IOWA_SEC_NONE
: The security layer is not involved in the communication with this peer.</p>
<p>IOWA_SEC_CERTIFICATE_WITH_EST
: Use the X.509 Certificate with EST mode of the security layer.</p>
<p>IOWA_SEC_OSCORE
: Use the OSCORE security of the CoAP layer. This value can be used as a flag to be combined with the other values, e.g. <code>IOWA_SEC_PRE_SHARED_KEY | IOWA_SEC_OSCORE</code>.</p>
<h3 id="iowa_cert_usage_mode_t">iowa_cert_usage_mode_t<a class="headerlink" href="#iowa_cert_usage_mode_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="kt">uint8_t</span> <span class="n">iowa_cert_usage_mode_t</span><span class="p">;</span>
</code></pre></div>

<p>This contains the possible semantic of the certificate or raw public key, which is used to match the certificate presented in the TLS/DTLS handshake. It is used by the Security layer when the security is <strong>IOWA_SEC_RAW_PUBLIC_KEY</strong>, <strong>IOWA_SEC_CERTIFICATE</strong>, or <strong>IOWA_SEC_CERTIFICATE_WITH_EST</strong>. The following values are defined:</p>
<p>IOWA_CERTIFICATE_USAGE_CA_CONSTRAINT
: CA constraint.</p>
<p>IOWA_CERTIFICATE_USAGE_SERVICE_CERTIFICATE_CONSTRAINT
: Service certificate constraint.</p>
<p>IOWA_CERTIFICATE_USAGE_TRUST_ANCHOR_ASSERTION
: Trust anchor assertion.</p>
<p>IOWA_CERTIFICATE_USAGE_DOMAIN_ISSUED_CERTIFICATE
: Domain-issued certificate.</p>
<h3 id="iowa_security_state_t">iowa_security_state_t<a class="headerlink" href="#iowa_security_state_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">enum</span>
<span class="p">{</span>
    <span class="n">SECURITY_STATE_DISCONNECTED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_DISCONNECTING</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_INIT_HANDSHAKE</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_HANDSHAKING</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_HANDSHAKE_DONE</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_CONNECTED</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_CONNECTION_FAILING</span><span class="p">,</span>
    <span class="n">SECURITY_STATE_CONNECTION_FAILED</span><span class="p">,</span>
<span class="p">}</span> <span class="n">iowa_security_state_t</span><span class="p">;</span>
</code></pre></div>

<p>This reflects the state of the security session. It is an enumeration of the following values:</p>
<p>SECURITY_STATE_DISCONNECTED
: The security session is disconnected.</p>
<p>SECURITY_STATE_DISCONNECTING
: The security session is currently disconnecting.</p>
<p>SECURITY_STATE_INIT_HANDSHAKE
: The security session is starting the handshake with the peer.</p>
<p>SECURITY_STATE_HANDSHAKING
: The security session is in the middle of the handshake with the peer.</p>
<p>SECURITY_STATE_HANDSHAKE_DONE
: The handshake with the peer is done.</p>
<p>SECURITY_STATE_CONNECTED
: The security session is connected to the peer.</p>
<p>SECURITY_STATE_CONNECTION_FAILING
: An error occurred during the security session connection to the peer.</p>
<p>SECURITY_STATE_CONNECTION_FAILED
: The security session failed to connect to the peer.</p>
<h3 id="iowa_security_event_t">iowa_security_event_t<a class="headerlink" href="#iowa_security_event_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">enum</span>
<span class="p">{</span>
    <span class="n">SECURITY_EVENT_UNDEFINED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">SECURITY_EVENT_DISCONNECTED</span><span class="p">,</span>
    <span class="n">SECURITY_EVENT_CONNECTED</span><span class="p">,</span>
    <span class="n">SECURITY_EVENT_DATA_AVAILABLE</span><span class="p">,</span>
<span class="p">}</span> <span class="n">iowa_security_event_t</span><span class="p">;</span>
</code></pre></div>

<p>This contains the possible events to report to the upper layers. It is an enumeration of the following values:</p>
<p>SECURITY_EVENT_UNDEFINED
: No specific event. This should never be used and only serves as a non default event.</p>
<p>SECURITY_EVENT_DISCONNECTED
: The security session disconnected.</p>
<p>SECURITY_EVENT_CONNECTED
: The security session is now connected.</p>
<p>SECURITY_EVENT_DATA_AVAILABLE
: Decrypted data are available to read on the security session.</p>
<h3 id="iowa_security_hash_t">iowa_security_hash_t<a class="headerlink" href="#iowa_security_hash_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">enum</span>
<span class="p">{</span>
    <span class="n">SECURITY_HMAC_UNDEFINED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">SECURITY_HMAC_SHA256_64</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">SECURITY_HMAC_SHA256</span>    <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">SECURITY_HMAC_SHA384</span>    <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">SECURITY_HMAC_SHA512</span>    <span class="o">=</span> <span class="mi">7</span>
<span class="p">}</span> <span class="n">iowa_security_hash_t</span><span class="p">;</span>
</code></pre></div>

<p>This contains the possible HMAC algorithms used by OSCORE. See table 7 of <a href="https://tools.ietf.org/html/rfc8152">RFC 8152</a>.</p>
<p>SECURITY_HMAC_UNDEFINED
: No specific algorithm. This should never be used and only serves as a non default value.</p>
<p>SECURITY_HMAC_SHA256_64
: HMAC with SHA-256 truncated to 64 bits.</p>
<p>SECURITY_HMAC_SHA256
: HMAC with SHA-256.</p>
<p>SECURITY_HMAC_SHA384
: HMAC with SHA-384.</p>
<p>SECURITY_HMAC_SHA512
: HMAC with SHA-512.</p>
<h3 id="iowa_security_aead_t">iowa_security_aead_t<a class="headerlink" href="#iowa_security_aead_t" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">typedef</span> <span class="k">enum</span>
<span class="p">{</span>
    <span class="n">SECURITY_AEAD_UNDEFINED</span>          <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_16_64_128</span>  <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_16_64_256</span>  <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_64_64_128</span>  <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_64_64_256</span>  <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_16_128_128</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_16_128_256</span> <span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_64_128_128</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
    <span class="n">SECURITY_AEAD_AES_CCM_64_128_256</span> <span class="o">=</span> <span class="mi">33</span>
<span class="p">}</span> <span class="n">iowa_security_aead_t</span><span class="p">;</span>
</code></pre></div>

<p>This contains the possible AEAD algorithms used by OSCORE. See table 10 of <a href="https://tools.ietf.org/html/rfc8152">RFC 8152</a>.</p>
<p>SECURITY_AEAD_UNDEFINED
: No specific algorithm. This should never be used and only serves as a non default value.</p>
<p>SECURITY_AEAD_AES_CCM_16_64_128
: AES-CCM mode 128-bit key, 64-bit tag, 13-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_16_64_256
: AES-CCM mode 256-bit key, 64-bit tag, 13-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_64_64_128
: AES-CCM mode 128-bit key, 64-bit tag, 7-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_64_64_256
: AES-CCM mode 256-bit key, 64-bit tag, 7-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_16_128_128
: AES-CCM mode 128-bit key, 128-bit tag, 13-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_16_128_256
: AES-CCM mode 256-bit key, 128-bit tag, 13-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_64_128_128
: AES-CCM mode 128-bit key, 128-bit tag, 7-byte nonce.</p>
<p>SECURITY_AEAD_AES_CCM_64_128_256
: AES-CCM mode 256-bit key, 128-bit tag, 7-byte nonce.</p>
<p>\clearpage</p>
<h2 id="helper-functions">Helper Functions<a class="headerlink" href="#helper-functions" title="Permanent link">&para;</a></h2>
<h3 id="iowa_security_session_set_user_internals">iowa_security_session_set_user_internals<a class="headerlink" href="#iowa_security_session_set_user_internals" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_security_session_set_user_internals</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                              <span class="kt">void</span> <span class="o">*</span><span class="n">internalsP</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_set_user_internals()</code> stores opaque data in a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session where to store the opaque data.</p>
<p><em>internalsP</em>
: A pointer to the opaque data to store.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_user_internals">iowa_security_session_get_user_internals<a class="headerlink" href="#iowa_security_session_get_user_internals" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="o">*</span> <span class="nf">iowa_security_session_get_user_internals</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_user_internals()</code> retrieves the opaque data stored in a security session with <a href="./#iowa_security_session_set_user_internals"><code>iowa_security_session_set_user_internals()</code></a>.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to the security session where to store the opaque data.</p>
<p><strong> Return Value </strong></p>
<p>A pointer to the stored opaque data.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_state">iowa_security_session_get_state<a class="headerlink" href="#iowa_security_session_get_state" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_security_state_t</span>
<span class="nf">iowa_security_session_get_state</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_state()</code> retrieves the state of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The state of the security session.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_set_state">iowa_security_session_set_state<a class="headerlink" href="#iowa_security_session_set_state" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_security_session_set_state</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                     <span class="n">iowa_security_state_t</span> <span class="n">state</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_set_state()</code> sets the state of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><em>state</em>
: The new state of the security session.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p>\clearpage</p>
<h3 id="iowa_security_get_server_session">iowa_security_get_server_session<a class="headerlink" href="#iowa_security_get_server_session" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_security_session_t</span> <span class="nf">iowa_security_get_server_session</span><span class="p">(</span><span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">,</span>
                                                         <span class="kt">uint16_t</span> <span class="n">shortServerId</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_get_server_session()</code> retrieves the security session associated to a Server.</p>
<p><strong> Arguments </strong></p>
<p><em>contextP</em>
: An <a href="../CommonAPI/#iowa_context_t"><code>iowa_context_t</code></a> as returned by <a href="../CommonAPI/#iowa_init"><code>iowa_init()</code></a>. Not checked at runtime.</p>
<p><em>shortServerId</em>
: The Short ID assigned to the server.</p>
<p><strong> Return Value </strong></p>
<p>The security session if found, otherwise NULL.</p>
<p>\clearpage</p>
<h3 id="iowa_security_get_client_session">iowa_security_get_client_session<a class="headerlink" href="#iowa_security_get_client_session" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_security_session_t</span> <span class="nf">iowa_security_get_client_session</span><span class="p">(</span><span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">,</span>
                                                         <span class="kt">uint32_t</span> <span class="n">clientId</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_get_client_session()</code> retrieves the security session associated to a Client.</p>
<p><strong> Arguments </strong></p>
<p><em>contextP</em>
: An <a href="../CommonAPI/#iowa_context_t"><code>iowa_context_t</code></a> as returned by <a href="../CommonAPI/#iowa_init"><code>iowa_init()</code></a>. Not checked at runtime.</p>
<p><em>clientId</em>
: The ID assigned to the Client.</p>
<p><strong> Return Value </strong></p>
<p>The security session if found, otherwise NULL.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_generate_event">iowa_security_session_generate_event<a class="headerlink" href="#iowa_security_session_generate_event" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_security_session_generate_event</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                          <span class="n">iowa_security_event_t</span> <span class="n">event</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_generate_event()</code> calls the event callback of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><em>event</em>
: The event to be passed as parameter to the event callback.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_connection_type">iowa_security_session_get_connection_type<a class="headerlink" href="#iowa_security_session_get_connection_type" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_connection_type_t</span>
<span class="nf">iowa_security_session_get_connection_type</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_connection_type()</code> retrieves the type of the underlying connection of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The type of the underlying connection as an <a href="../AbstractionLayer/#iowa_connection_type_t"><code>iowa_connection_type_t</code></a>.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_security_mode">iowa_security_session_get_security_mode<a class="headerlink" href="#iowa_security_session_get_security_mode" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_security_mode_t</span>
<span class="nf">iowa_security_session_get_security_mode</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_security_mode()</code> retrieves the security mode of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The security mode as an <a href="./#iowa_security_mode_t"><code>iowa_security_mode_t</code></a>.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_uri">iowa_security_session_get_uri<a class="headerlink" href="#iowa_security_session_get_uri" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">iowa_security_session_get_uri</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_uri()</code> retrieves the URI of the peer of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The URI of the peer.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_set_step_delay">iowa_security_session_set_step_delay<a class="headerlink" href="#iowa_security_session_set_step_delay" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">iowa_security_session_set_step_delay</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                          <span class="kt">int32_t</span> <span class="n">delay</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_set_step_delay()</code> sets the delay before the next scheduled operation on a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><em>securityS</em>
: the time in seconds before <a href="./#iowa_user_security_step"><code>iowa_user_security_step()</code></a> needs to be call again for this security session.</p>
<p><strong> Return Value </strong></p>
<p>None.</p>
<p><strong> Notes </strong></p>
<p>If <em>delay</em> is a negative number, it is ignored.</p>
<p>As IOWA maintains only one global delay, <a href="./#iowa_user_security_step"><code>iowa_user_security_step()</code></a> may be called before the delay expires. The delay must be updated at each call.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_context">iowa_security_session_get_context<a class="headerlink" href="#iowa_security_session_get_context" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">iowa_context_t</span> <span class="nf">iowa_security_session_get_context</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_context()</code> retrieves the IOWA context in which a security session exists.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The IOWA context.</p>
<p>\clearpage</p>
<h3 id="iowa_security_session_get_context_user_data">iowa_security_session_get_context_user_data<a class="headerlink" href="#iowa_security_session_get_context_user_data" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="o">*</span> <span class="nf">iowa_security_session_get_context_user_data</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_session_get_context_user_data()</code> retrieves the pointer to application-specific data of the IOWA context in which a security session exists.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><strong> Return Value </strong></p>
<p>The pointer to application-specific data as passed to <a href="../CommonAPI/#iowa_init"><code>iowa_init()</code></a>.</p>
<p>\clearpage</p>
<h3 id="iowa_security_connection_send">iowa_security_connection_send<a class="headerlink" href="#iowa_security_connection_send" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span> <span class="nf">iowa_security_connection_send</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                  <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                                  <span class="kt">size_t</span> <span class="n">length</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_connection_send()</code> sends data on the underlying connection of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><em>buffer</em>
: The data to send.</p>
<p><em>length</em>
: The length of the data in bytes.</p>
<p><strong> Return Value </strong></p>
<p>The number of bytes sent or a negative number in case of error.</p>
<p>\clearpage</p>
<h3 id="iowa_security_connection_recv">iowa_security_connection_recv<a class="headerlink" href="#iowa_security_connection_recv" title="Permanent link">&para;</a></h3>
<p><strong> Prototype </strong></p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span> <span class="nf">iowa_security_connection_recv</span><span class="p">(</span><span class="n">iowa_security_session_t</span> <span class="n">securityS</span><span class="p">,</span>
                                  <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                                  <span class="kt">size_t</span> <span class="n">length</span><span class="p">);</span>
</code></pre></div>

<p><strong> Description </strong></p>
<p><code>iowa_security_connection_recv()</code> reads data on the underlying connection of a security session.</p>
<p><strong> Arguments </strong></p>
<p><em>securityS</em>
: An iowa_security_session_t pointing to a security session.</p>
<p><em>buffer</em>
: A buffer to store the received data.</p>
<p><em>length</em>
: The number of bytes to read.</p>
<p><strong> Return Value </strong></p>
<p>The number of bytes read or a negative number in case of error.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IoTerop
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://ioterop.com/" target="_blank" rel="noopener" title="Website" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 01-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 01-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 00-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 00-15.55-3.1l-31.17 10.39a11.95 11.95 0 00-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 018.93 21.57 46.536 46.536 0 01-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 010-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"/></svg>
      </a>
    
      
      
      <a href="https://github.com/IOTEROP" target="_blank" rel="noopener" title="GitHub" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
      <a href="https://twitter.com/ioteropcompany" target="_blank" rel="noopener" title="Twitter" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>