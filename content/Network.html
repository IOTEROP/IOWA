
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="ApplicationStorage.html">
      
      
        <link rel="next" href="Porting.html">
      
      <link rel="icon" href="images/iowa_logo.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.19">
    
    
      
        <title>Network - IOWA Reference</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../ioterop.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iowa-network-environment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="IOWA Reference" class="md-header__button md-logo" aria-label="IOWA Reference" data-md-component="logo">
      
  <img src="images/iowa_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IOWA Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Network
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../index.html" class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="Changelog.html" class="md-tabs__link">
      Changelog
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="LwM2MOverview.html" class="md-tabs__link md-tabs__link--active">
        User Manual
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="baseline_client.html" class="md-tabs__link">
        Samples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="AbstractionLayer.html" class="md-tabs__link">
        API Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="License.html" class="md-tabs__link">
        Licenses
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../print_page.html" class="md-tabs__link">
      Printable version
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="IOWA Reference" class="md-nav__button md-logo" aria-label="IOWA Reference" data-md-component="logo">
      
  <img src="images/iowa_logo.png" alt="logo">

    </a>
    IOWA Reference
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Changelog.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          User Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="LwM2MOverview.html" class="md-nav__link">
        LwM2M Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Building.html" class="md-nav__link">
        Building Samples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Configuration.html" class="md-nav__link">
        IOWA Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Security.html" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Multithread.html" class="md-nav__link">
        Multithread
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bootstrap.html" class="md-nav__link">
        Bootstrap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="DeviceUpdate.html" class="md-nav__link">
        Device Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CustomObject.html" class="md-nav__link">
        Custom Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Streamable.html" class="md-nav__link">
        Streamable Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ApplicationStorage.html" class="md-nav__link">
        Application Storage
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Network
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Network.html" class="md-nav__link md-nav__link--active">
        Network
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-reliability" class="md-nav__link">
    Network reliability
  </a>
  
    <nav class="md-nav" aria-label="Network reliability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#behind-the-transport" class="md-nav__link">
    Behind the transport
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-registration-in-lwm2m-11" class="md-nav__link">
    Client Registration in LwM2M 1.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms-specific-behaviors" class="md-nav__link">
    SMS specific behaviors
  </a>
  
    <nav class="md-nav" aria-label="SMS specific behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msisdn-fallback" class="md-nav__link">
    MSISDN Fallback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registration-update-trigger-message" class="md-nav__link">
    Registration Update Trigger message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-reachability" class="md-nav__link">
    Network reachability
  </a>
  
    <nav class="md-nav" aria-label="Network reachability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flow" class="md-nav__link">
    Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa-api" class="md-nav__link">
    IOWA API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Porting.html" class="md-nav__link">
        Porting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="LoRaWAN.html" class="md-nav__link">
        LoRaWAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
      
      
      
        <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_14">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Object_Skeleton_Generator.html" class="md-nav__link">
        Object Skeleton Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="baseline_client.html" class="md-nav__link">
        LwM2M Client Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          LwM2M Objects Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          LwM2M Objects Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="IPSO_client.html" class="md-nav__link">
        IPSO Object Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="bearer_selection_client.html" class="md-nav__link">
        Bearer Selection Object
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="mqtt_objects_client.html" class="md-nav__link">
        MQTT Objects
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          LwM2M Custom Objects Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          LwM2M Custom Objects Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="custom_object_baseline.html" class="md-nav__link">
        Custom Object Basseline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="custom_object_dynamic.html" class="md-nav__link">
        Dynamic Custom Object
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="custom_object_multiple_instances.html" class="md-nav__link">
        Multiple Instance Custom Object
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="custom_object_multiple_resource_instances.html" class="md-nav__link">
        Multiple Resource Custom Object
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="streamable_resource_client.html" class="md-nav__link">
        Streamable Resources Client
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Firmware Update Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Firmware Update Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fw_update_push_client.html" class="md-nav__link">
        Firmware Update Client "Push" Method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fw_update_pull_client.html" class="md-nav__link">
        Firmware Update Client "Pull" Method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fw_coap_download_client.html" class="md-nav__link">
        Firmware Update Client with CoAP Download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fw_coap_block_client.html" class="md-nav__link">
        Firmware Update Client with CoAP Block-Wise Transfer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
      
      
      
        <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
          LwM2M Advanced Client Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          LwM2M Advanced Client Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="bootstrap_client.html" class="md-nav__link">
        Bootstrap Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="multithread_IPSO_client.html" class="md-nav__link">
        Multithreaded Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="device_info_client.html" class="md-nav__link">
        Device Info Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="context_storage_client.html" class="md-nav__link">
        Context Storage Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="websockets_client.html" class="md-nav__link">
        WebSocket Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="virtual_observe_client.html" class="md-nav__link">
        Virtual Observe Client
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
          Security Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Security Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="secure_client_mbedtls3.html" class="md-nav__link">
        Secure Client with Mbed TLS 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="secure_client_mbedtls2.html" class="md-nav__link">
        Secure Client with Mbed TLS 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="secure_client_tinydtls.html" class="md-nav__link">
        Secure Client with tinydtls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="oscore_client_mbedtls.html" class="md-nav__link">
        OSCORE Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="oscore_server_mbedtls.html" class="md-nav__link">
        OSCORE Server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="baseline_server.html" class="md-nav__link">
        LwM2M Server Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="legacy.html" class="md-nav__link">
        Legacy Samples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="AbstractionLayer.html" class="md-nav__link">
        System Abstraction Layer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CommonAPI.html" class="md-nav__link">
        Common APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ClientAPI.html" class="md-nav__link">
        Client APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          Objects APIs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Objects APIs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectConnectivityMonitoring.html" class="md-nav__link">
        Connectivity Monitoring (ID 4)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectFirmwareUpdate.html" class="md-nav__link">
        Firmware Update (ID 5)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectLocation.html" class="md-nav__link">
        Location (ID 6)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectConnectivityStatistics.html" class="md-nav__link">
        Connectivity Statistics (ID 7)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectSoftwareManagement.html" class="md-nav__link">
        LwM2M Software Management (ID 9)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectCellularConnectivity.html" class="md-nav__link">
        LwM2M Cellular Connectivity (ID 10)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectAPN.html" class="md-nav__link">
        LwM2M APN Connection Profile (ID 11)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectBearerSelection.html" class="md-nav__link">
        LwM2M Bearer Selection (ID 13)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectSoftwareComponent.html" class="md-nav__link">
        LwM2M Software Component (ID 14)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectDigitalOutput.html" class="md-nav__link">
        IPSO Digital Output (ID 3201)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectLightControl.html" class="md-nav__link">
        IPSO Light Control (ID 3311)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectAccelerometer.html" class="md-nav__link">
        IPSO Accelerometer (ID 3313)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectMagnetometer.html" class="md-nav__link">
        IPSO Magnetometer (ID 3314)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectGyrometer.html" class="md-nav__link">
        IPSO Gyrometer (ID 3334)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectGPS.html" class="md-nav__link">
        IPSO Location a.k.a. GPS (ID 3336)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectDimmer.html" class="md-nav__link">
        IPSO Dimmer (ID 3343)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ObjectAT.html" class="md-nav__link">
        AT Command (ID 10251)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ServerAPI.html" class="md-nav__link">
        Server APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="BootstrapServerAPI.html" class="md-nav__link">
        Bootstrap Server APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CoapAPI.html" class="md-nav__link">
        CoAP APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="UtilsAPI.html" class="md-nav__link">
        Utils APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SecurityAPI.html" class="md-nav__link">
        Security Implementation APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
      
      
      
        <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
          Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Components.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SecurityComponent.html" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="LoggerAPI.html" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="DeprecatedAPI.html" class="md-nav__link">
        Deprecated APIs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Licenses
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Licenses
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="License.html" class="md-nav__link">
        IOWA License
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="OpenSourceLicenses.html" class="md-nav__link">
        OpenSource Licenses
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../print_page.html" class="md-nav__link">
        Printable version
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-reliability" class="md-nav__link">
    Network reliability
  </a>
  
    <nav class="md-nav" aria-label="Network reliability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#behind-the-transport" class="md-nav__link">
    Behind the transport
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-registration-in-lwm2m-11" class="md-nav__link">
    Client Registration in LwM2M 1.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms-specific-behaviors" class="md-nav__link">
    SMS specific behaviors
  </a>
  
    <nav class="md-nav" aria-label="SMS specific behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msisdn-fallback" class="md-nav__link">
    MSISDN Fallback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registration-update-trigger-message" class="md-nav__link">
    Registration Update Trigger message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-reachability" class="md-nav__link">
    Network reachability
  </a>
  
    <nav class="md-nav" aria-label="Network reachability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flow" class="md-nav__link">
    Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iowa-api" class="md-nav__link">
    IOWA API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                


    <a href="../print_page.html" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3Z"/></svg>
    </a>



                  


<h1 id="iowa-network-environment">IOWA Network environment</h1>
<h2 id="network-reliability">Network reliability</h2>
<h3 id="behind-the-transport">Behind the transport</h3>
<p>Network reliability is a real issue when a system is deployed in an environment. Some networks can be reliable, when others do not guarantee the transmission of a message from one side to another.</p>
<p>IOWA supports the following transports:</p>
<ul>
<li>User Datagram Protocol (aka UDP)</li>
<li>Transmission Control Protocol (aka TCP)</li>
<li>LoRaWAN</li>
<li>Short Message Service (aka SMS)</li>
</ul>
<p>For each transport, a set of constants is defined to maximize the chances that message is received. These constants can be simplified into two parts: a retransmission counter and an initial timeout.
The retransmission counter is the number of attempts to send until the communication is considered as failed. The initial timeout is the number of second to wait for a response before resending the message.</p>
<p>The algorithm is as follows: when the initial timeout is triggered and the retransmission counter is less than the maximum retransmission number, the message is retransmitted, the retransmission counter is incremented, and the timeout is doubled. If the retransmission counter reaches the maximum retransmission number on a timeout, then the attempt to transmit the message is canceled and the application process is notified of the failure. On the other hand, if the endpoint receives a response in time, transmission is considered successful.</p>
<p>In IOWA, it means:</p>
<ul>
<li>On server side: when an operation is performed, such as for a LwM2M Server a Read operation, if the message is not received by the client, the callback <a href="ServerAPI.html#iowa_result_callback_t"><code>iowa_result_callback_t</code></a> will be called with <em>status</em> sets to IOWA_COAP_503_SERVICE_UNAVAILABLE.</li>
<li>On client side: if a Confirmable message is not acknowledged by the LwM2M Server such as the registration message, the registration update message, or a confirmable notification, the connection is considered lost. In case of registration or registration update, the callback <a href="ClientAPI.html#iowa_event_callback_t"><code>iowa_event_callback_t</code></a> will be called with <em>eventP-&gt;eventType</em> sets to IOWA_EVENT_REG_FAILED and the function <a href="CommonAPI.html#iowa_step"><code>iowa_step</code></a> will exit by returning IOWA_COAP_503_SERVICE_UNAVAILABLE. On the other hand, if a confirmable notification is not acknowledged, the LwM2M Client deactivates the Server Account until the connection is reestablished, that is, an Acknowledgment is received on a Confirmable message.</li>
<li>On both side: if the Platform layer returns a negative value on <a href="AbstractionLayer.html#iowa_system_connection_send"><code>iowa_system_connection_send</code></a>, <a href="AbstractionLayer.html#iowa_system_connection_recv"><code>iowa_system_connection_recv</code></a> or <a href="AbstractionLayer.html#iowa_system_connection_select"><code>iowa_system_connection_select</code></a>, the connection will be considered lost.</li>
</ul>
<h3 id="client-registration-in-lwm2m-11">Client Registration in LwM2M 1.1</h3>
<p>In LwM2M 1.0 the registration procedure is very simple: either the registration is successful or it failed.</p>
<p>In LwM2M 1.1 a new registration procedure was introduced with multiple registration attempts and an increasing delay between attempts. For more details, see the section 6.2.1.1. "Bootstrap and LwM2M Server Registration Mechanisms" of the <a href="https://www.openmobilealliance.org/release/LightweightM2M/V1_1_1-20190617-A/OMA-TS-LightweightM2M_Core-V1_1_1-20190617-A.pdf">LwM2M 1.1 Core TS</a>.</p>
<p>The default number of attempts is set to 5. The default timer between attempts is set to 60 seconds and doubles after each failed registration.</p>
<p>There are three different ways to configure it:</p>
<ol>
<li>at IOWA build time.</li>
</ol>
<p>You can completely remove this behavior by setting the compilation flags <a href="Configuration.html#server"><strong>IOWA_SERVER_RSC_REGISTRATION_BEHAVIOUR_REMOVE</strong></a> and <a href="Configuration.html#server"><strong>IOWA_SERVER_RSC_COMMUNICATION_ATTEMPTS_REMOVE</strong></a>.</p>
<p>You can also change the default values <strong>IOWA_SERVER_ACCOUNT_DEFAULT_COMM_RETRY_COUNT_VALUE</strong>, <strong>IOWA_SERVER_ACCOUNT_DEFAULT_COMM_RETRY_TIMER_VALUE</strong>, <strong>IOWA_SERVER_ACCOUNT_DEFAULT_COMM_SEQUENCE_DELAY_VALUE</strong>, and <strong>IOWA_SERVER_ACCOUNT_DEFAULT_COMM_SEQUENCE_COUNT_VALUE</strong> defined in iowa_client.h</p>
<ol>
<li>from the application.</li>
</ol>
<p>The APIs <a href="ClientAPI.html#iowa_client_set_server_registration_behaviour"><code>iowa_client_set_server_registration_behaviour()</code></a> and <a href="ClientAPI.html#iowa_client_set_server_communication_attempts"><code>iowa_client_set_server_communication_attempts()</code></a> are controlling the registration settings.</p>
<ol>
<li>by the LwM2M Server (or the LwM2M Bootstrap Server).</li>
</ol>
<p>The LwM2M Server can write in the LwM2M Server Object (ID: 1) the resources 14 to 20 detailed below:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Resource Name</th>
<th>Access Type</th>
<th>Mandatory</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>14</td>
<td>Initial Registration Delay Timer</td>
<td></td>
<td>No</td>
<td>Unsigned Integer</td>
<td>The delay before registration is attempted for this LwM2M Server based upon the completion of registration of the previous LwM2M Server in the registration order.</td>
</tr>
<tr>
<td>15</td>
<td>Registration Failure Block</td>
<td></td>
<td>No</td>
<td>Boolean</td>
<td>Prevent or not the registration on the next LwM2M Server when the registration fails to connect with this LwM2M server.</td>
</tr>
<tr>
<td>16</td>
<td>Bootstrap on Registration Failure</td>
<td></td>
<td>No</td>
<td>Boolean</td>
<td>Initiate a Bootstrap Request or not when the registration fails to connect with this LwM2M server.</td>
</tr>
<tr>
<td>17</td>
<td>Communication Retry Count</td>
<td></td>
<td>No</td>
<td>Unsigned Integer</td>
<td>The number of successive communication attempts before which a communication sequence is considered as failed.</td>
</tr>
<tr>
<td>18</td>
<td>Communication Retry Timer</td>
<td></td>
<td>No</td>
<td>Unsigned Integer</td>
<td>The delay between successive communication attempts in a communication sequence.</td>
</tr>
<tr>
<td>19</td>
<td>Communication Sequence Delay Timer</td>
<td></td>
<td>No</td>
<td>Unsigned Integer</td>
<td>The delay between successive communication sequences.</td>
</tr>
<tr>
<td>20</td>
<td>Communication Sequence Retry Count</td>
<td></td>
<td>No</td>
<td>Unsigned Integer</td>
<td>The number of successive communication sequences before which a registration attempt is considered as failed.</td>
</tr>
</tbody>
</table>
<h3 id="sms-specific-behaviors">SMS specific behaviors</h3>
<h4 id="msisdn-fallback">MSISDN Fallback</h4>
<p>There is a MSISDN fallback for the Client when the connection can't be established on a Registration message or a Registration Update message is not acknowledged.</p>
<p>This fallback can be activated with the define <a href="Configuration.html#transports"><code>IOWA_SMS_SUPPORT</code></a> and by providing the LwM2M Server MSISDN number with <a href="ClientAPI.html#iowa_client_set_server_msisdn"><code>iowa_client_set_server_msisdn</code></a>. In that case, if the LwM2M Client cannot reach a LwM2M Server, IOWA will close the current connection before opening a new SMS connection to try to register with this transport. On this second attempt, if the LwM2M Client has again no response from the LwM2M Server, <a href="CommonAPI.html#iowa_step"><code>iowa_step</code></a> will exit by returning IOWA_COAP_503_SERVICE_UNAVAILABLE.</p>
<p><img alt="MSISDN Fallback" src="images/msisdn_fallback.png" /></p>
<h4 id="registration-update-trigger-message">Registration Update Trigger message</h4>
<p>On the LwM2M Server side when an operation is not acknowledged by the LwM2M Client, the Server can generate a Registration Update Trigger message with <a href="ServerAPI.html#iowa_server_create_registration_update_trigger_message"><code>iowa_server_create_registration_update_trigger_message</code></a>. This message has to be sent by SMS to the Client.</p>
<p>For this purpose, the Client must at least on its Registration message give its MSISDN number. This MSISDN number can be provided to IOWA when calling <a href="ClientAPI.html#iowa_client_configure"><code>iowa_client_configure</code></a> and setting <em>infoP-&gt;msisdn</em>. Last but not least, the Client has to listen on incoming SMS messages. If a message is received out of bound, the Client has to call <a href="ClientAPI.html#iowa_client_new_incoming_connection"><code>iowa_client_new_incoming_connection</code></a>. If the message received is a Registration Update Trigger, IOWA will automatically send a Registration Update using the Client preferred binding.</p>
<p><img alt="Registration Update Trigger" src="images/registration_update_trigger.png" /></p>
<h2 id="network-reachability">Network reachability</h2>
<p>The LwM2M Server should always be present. But this is not the case for the LwM2M Client. There are multiple reasons for a LwM2M Client not to be available.</p>
<ol>
<li>
<p>A LwM2M Server can deactivate the connection with a LwM2M Client for a certain period. This mechanism can be triggered by executing the resource Disable (ID: 4) of the <a href="LwM2MOverview.html#server-object"><code>Server Object</code></a>. The LwM2M Server Account will be disabled for a certain period defined in the Disabled Timeout Resource (ID: 5).
After receiving the Execute operation, LwM2M Client must perform the deregistration process, and underlying network connection between the LwM2M Client and LwM2M Server must be disconnected to disable the LwM2M Server account. After the above process, the LwM2M Client must not send any message to the Server and ignore all the messages from the LwM2M Server for the period.
Once the disabled timeout expires, the client restarts the registration process to reconnect to the LwM2M Server.</p>
</li>
<li>
<p>In LwM2M, there is a mechanism called Queue Mode which offers functionality for a LwM2M Client to inform the LwM2M Server that it may be disconnected for an extended period and when it becomes reachable again.
When the LwM2M Client is not reachable, the LwM2M Server does not immediately send downlink requests, but instead waits until the LwM2M Client becomes reachable again.</p>
</li>
</ol>
<h3 id="flow">Flow</h3>
<p><img alt="Device Management with Queue Mode" src="images/dm_se_interface_exchanges_queue_mode.png" /></p>
<p>A typical Queue Mode sequence follows the steps listed below:</p>
<ul>
<li>The LwM2M Client registers to the LwM2M Server and requests the LwM2M Server to run in Queue mode.</li>
<li>The LwM2M Client should use the CoAP constant MAX_TRANSMIT_WAIT (93 seconds) to set a timer for how long it shall stay awake after sending a message to the LwM2M Server. After the timeout expires without any messages from the LwM2M Server, the LwM2M Client enters sleep mode.</li>
<li>At some point in time the LwM2M Client wakes up again and transmits a registration update message. Note: During the time the LwM2M Client has been sleeping the IP address assigned to it may have been released and/or existing NAT bindings may have been released. If this is the case, then the client needs to re-run the TLS/DTLS handshake with the LwM2M Server since an IP address and/or port number change will destroy the existing security context.</li>
<li>When the LwM2M Server receives a message from the Client, it determines if any messages need to be sent to the LwM2M Client, as instructed by the Application Server.</li>
</ul>
<h3 id="iowa-api">IOWA API</h3>
<p>IOWA introduces two APIs to handle the Queue Mode: <a href="CommonAPI.html#iowa_flush_before_pause"><code>iowa_flush_before_pause</code></a> and <a href="ClientAPI.html#iowa_client_send_heartbeat"><code>iowa_client_send_heartbeat</code></a>.</p>
<p><a href="CommonAPI.html#iowa_flush_before_pause"><code>iowa_flush_before_pause</code></a> is used to inform the LwM2M stack that the device will pause. <code>iowa_flush_before_pause()</code> performs all the pending and required operations of the LwM2M stack engine before returning. It means that if the registration lifetime expires during the device sleep, IOWA will send a registration update before returning from this function. When waking up, the LwM2M Client is connected again to the LwM2M Server.
This function also returns a parameter <em>delayP</em> to indicate when the next scheduled IOWA operation is.</p>
<p><a href="ClientAPI.html#iowa_client_send_heartbeat"><code>iowa_client_send_heartbeat</code></a> is used to send a heartbeat message to a LwM2M Server. Depending on the transport, the heartbeat sent can be a CoAP Empty message on LoRaWAN, or a registration update message for others transports.</p>
<p>Below an example in pseudocode to use these APIs:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;iowa_client.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span>
<span class="w">         </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">iowa_context_t</span><span class="w"> </span><span class="n">iowaH</span><span class="p">;</span>
<span class="w">    </span><span class="n">iowa_status_t</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/******************</span>
<span class="cm">     * Initialization</span>
<span class="cm">     */</span>

<span class="w">    </span><span class="n">iowaH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iowa_init</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">iowa_client_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;IOWA_Sample_QM_Client&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">iowa_client_add_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
<span class="w">                           </span><span class="mi">1234</span><span class="p">,</span>
<span class="w">                           </span><span class="s">&quot;coap://localhost:5683&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                           </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                           </span><span class="n">IOWA_SEC_NONE</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/******************</span>
<span class="cm">     * &quot;Main loop&quot;</span>
<span class="cm">     */</span>

<span class="w">    </span><span class="k">do</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">iowaDelay</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Run for 93 seconds</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iowa_step</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span><span class="w"> </span><span class="mi">93</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Prepare to stand by for 60 minutes</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iowa_flush_before_pause</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">iowaDelay</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iowaDelay</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3600</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">STAND_BY</span><span class="p">(</span><span class="n">iowaDelay</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">STAND_BY</span><span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
<span class="w">            </span><span class="n">iowa_client_send_heartbeat</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">IOWA_COAP_NO_ERROR</span><span class="p">)</span>

<span class="w">    </span><span class="n">iowa_client_remove_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="p">);</span>
<span class="w">    </span><span class="n">iowa_close</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>In the above example, after calling <a href="CommonAPI.html#iowa_flush_before_pause"><code>iowa_flush_before_pause</code></a>, there are two possibilities:</p>
<ul>
<li><em>iowaDelay</em> is inferior to the requested stand by time. It means that on next <a href="CommonAPI.html#iowa_step"><code>iowa_step</code></a> call, IOWA will send to the Server a message such as notification, registration update, etc. So, the Server will notice the device wake up and send back any buffered requests.</li>
<li>Or, <em>iowaDelay</em> is equal to the requested stand by time. In that case, IOWA has nothing to send on next iowa_step() turn. To inform the Server that the device is awake, <a href="ClientAPI.html#iowa_client_send_heartbeat"><code>iowa_client_send_heartbeat</code></a> needs to be called.</li>
</ul>





                

              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020-2023 IoTerop
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://ioterop.com/" target="_blank" rel="noopener" title="Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m57.7 193 9.4 16.4c8.3 14.5 21.9 25.2 38 29.8l57.9 16.5c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6 16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5 4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5.3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3-92.8 0-171.5 60.9-198.2 145zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zM0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/IOTEROP" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/ioteropcompany" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../js/print-site.js"></script>
        
      
    
  </body>
</html>