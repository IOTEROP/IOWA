

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Device Update &mdash; Iowa documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Lite version:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id1">2020-09.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#behavior-changes">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#sdk-changes">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#bug-fixes">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id2">2020-09</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#new-features">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id3">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id4">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id5">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id6">2020-06.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id7">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id8">2020-06.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id9">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id10">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id11">2020-06</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id12">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id13">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id14">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id15">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id16">2020-03.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id17">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id18">2020-03.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id19">Bug Fixes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id20">Behavior Changes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id21">2020-03.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id22">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id23">2020-03.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id24">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id25">2020-03.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id26">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id27">2020-03.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id28">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id29">2020-03</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id30">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id31">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id32">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id33">Bug Fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id34">2019-12.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id35">Bug fixes {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id36">2019-12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id37">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id38">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id39">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#advanced-features">Advanced Features {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id40">2019-08</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id41">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id42">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id43">SDK Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#experimental-features">Experimental Features {-}</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Changelog.html#id44">2019-05</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id45">New Features {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id46">Behavior Changes {-}</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Changelog.html#id47">SDK Changes {-}</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="LwM2MOverview.html">LwM2M Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="LwM2MOverview.html#lwm2m-concepts">LwM2M Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-client-device">LwM2M Client/Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-server">LwM2M Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-bootstrap-server">LwM2M Bootstrap Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-resource">LwM2M Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-objects">LwM2M Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-object-instance">LwM2M Object Instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-uri">LwM2M URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#server-account">Server Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#bootstrap">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#observation">Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lifetime">Lifetime</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#queue-mode">Queue Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#sms-trigger">SMS Trigger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="LwM2MOverview.html#lwm2m-operations-overview">LwM2M Operations Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#id1">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#id2">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#device-management-and-service-enablement">Device Management and Service Enablement</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#information-reporting">Information Reporting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="LwM2MOverview.html#standardized-lwm2m-objects">Standardized LwM2M Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#security-object">Security Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#server-object">Server Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#access-control-list-object">Access Control List Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#device-object">Device Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#connectivity-monitoring-object">Connectivity Monitoring Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#firmware-update-object">Firmware Update Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#location-object">Location Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#connectivity-statistics-object">Connectivity Statistics Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#software-management-object">Software Management Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#cellular-connectivity-object">Cellular Connectivity Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#apn-connection-profile-object">APN Connection Profile Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#bearer-selection-object">Bearer selection Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#software-component-object">Software Component Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="LwM2MOverview.html#lwm2m-oscore">LwM2M OSCORE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EvaluationKit.html">IOWA Evaluation Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EvaluationKit.html#content">Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="EvaluationKit.html#samples">Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="EvaluationKit.html#compilation">Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="EvaluationKit.html#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="EvaluationKit.html#without-security">Without Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="EvaluationKit.html#with-psk-security">With PSK security</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AbstractionLayer.html">System Abstraction Layer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="AbstractionLayer.html#presentation">Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="AbstractionLayer.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-connection-type-t">iowa_connection_type_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-security-operation-t">iowa_security_operation_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-psk-data-t">iowa_psk_data_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-certificate-data-t">iowa_certificate_data_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-rpk-data-t">iowa_rpk_data_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-oscore-data-t">iowa_oscore_data_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-security-data-t">iowa_security_data_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="AbstractionLayer.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-malloc">iowa_system_malloc</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-free">iowa_system_free</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-gettime">iowa_system_gettime</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-reboot">iowa_system_reboot</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-trace">iowa_system_trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-open">iowa_system_connection_open</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-send">iowa_system_connection_send</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-get-peer-identifier">iowa_system_connection_get_peer_identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-recv">iowa_system_connection_recv</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-select">iowa_system_connection_select</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-interrupt-select">iowa_system_connection_interrupt_select</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-connection-close">iowa_system_connection_close</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-create">iowa_system_queue_create</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-delete">iowa_system_queue_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-enqueue">iowa_system_queue_enqueue</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-dequeue">iowa_system_queue_dequeue</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-peek">iowa_system_queue_peek</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-remove">iowa_system_queue_remove</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-backup">iowa_system_queue_backup</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-queue-restore">iowa_system_queue_restore</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-store-context">iowa_system_store_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-retrieve-context">iowa_system_retrieve_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-mutex-lock">iowa_system_mutex_lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-mutex-unlock">iowa_system_mutex_unlock</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-random-vector-generator">iowa_system_random_vector_generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="AbstractionLayer.html#iowa-system-security-data">iowa_system_security_data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CommonAPI.html">Common API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CommonAPI.html#presentation">Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="CommonAPI.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-status-t">iowa_status_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-context-t">iowa_context_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-dm-operation-t">iowa_dm_operation_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-bootstrap-operation-t">iowa_bootstrap_operation_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-lwm2m-data-type-t">iowa_lwm2m_data_type_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-lwm2m-data-t">iowa_lwm2m_data_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-lwm2m-object-link-t">iowa_lwm2m_object_link_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-content-format-t">iowa_content_format_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-lwm2m-uri-t">iowa_lwm2m_uri_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-response-content-t">iowa_response_content_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CommonAPI.html#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-response-callback-t">iowa_response_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-load-callback-t">iowa_load_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-save-callback-t">iowa_save_callback_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CommonAPI.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-init">iowa_init</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-step">iowa_step</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-flush-before-pause">iowa_flush_before_pause</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-stop">iowa_stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-close">iowa_close</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-clock-reset">iowa_clock_reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-save-context">iowa_save_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-save-context-snapshot">iowa_save_context_snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-load-context">iowa_load_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-backup-register-callback">iowa_backup_register_callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-backup-deregister-callback">iowa_backup_deregister_callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-connection-closed">iowa_connection_closed</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-data-get-block-info">iowa_data_get_block_info</a></li>
<li class="toctree-l3"><a class="reference internal" href="CommonAPI.html#iowa-data-set-block-info">iowa_data_set_block_info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ClientAPI.html">Client Mode API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#client-pseudo-code">Client pseudo code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-server-setting-id-t">iowa_server_setting_id_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-lwm2m-binding-t">iowa_lwm2m_binding_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-server-info-t">iowa_server_info_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-device-info-t">iowa_device_info_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-event-type-t">iowa_event_type_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-event-t">iowa_event_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-device-time-info-t">iowa_device_time_info_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-ipso-timed-value-t">iowa_ipso_timed_value_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-sensor-t">iowa_sensor_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-lwm2m-resource-desc-t">iowa_lwm2m_resource_desc_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-sensor-uri-t">iowa_sensor_uri_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-event-callback-t">iowa_event_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-time-update-callback-t">iowa_client_time_update_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-factory-reset-callback-t">iowa_client_factory_reset_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-rwe-callback-t">iowa_RWE_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-cd-callback-t">iowa_CD_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-ri-callback-t">iowa_RI_callback_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-configure">iowa_client_configure</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-new-incoming-connection">iowa_client_new_incoming_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-bootstrap-server">iowa_client_add_bootstrap_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-bootstrap-server">iowa_client_remove_bootstrap_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-bootstrap-server-hold-off">iowa_client_set_bootstrap_server_hold_off</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-get-bootstrap-server-coap-peer">iowa_client_get_bootstrap_server_coap_peer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-server">iowa_client_add_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-server">iowa_client_remove_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-server-configuration">iowa_client_set_server_configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-server-msisdn">iowa_client_set_server_msisdn</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-server-registration-behaviour">iowa_client_set_server_registration_behaviour</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-server-communication-attempts">iowa_client_set_server_communication_attempts</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-get-server-count">iowa_client_get_server_count</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-get-server-array">iowa_client_get_server_array</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-get-server-coap-peer">iowa_client_get_server_coap_peer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-notification-default-periods">iowa_client_set_notification_default_periods</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-use-reliable-notifications">iowa_client_use_reliable_notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-object-set-mode">iowa_client_object_set_mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-device-update-battery">iowa_client_device_update_battery</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-device-power-source">iowa_client_add_device_power_source</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-device-power-source">iowa_client_remove_device_power_source</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-update-device-power-source">iowa_client_update_device_power_source</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-update-device-information">iowa_client_update_device_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-set-device-error-code">iowa_client_set_device_error_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-clear-device-error-code">iowa_client_clear_device_error_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-update-device-time-information">iowa_client_update_device_time_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-custom-object">iowa_client_add_custom_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-custom-object">iowa_client_remove_custom_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-object-resource-changed">iowa_client_object_resource_changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-object-instance-changed">iowa_client_object_instance_changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-notification-lock">iowa_client_notification_lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-send-heartbeat">iowa_client_send_heartbeat</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-send-sensor-data">iowa_client_send_sensor_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-send-data">iowa_client_send_data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#accelerometer-object-api">Accelerometer Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-accelerometer-object">iowa_client_add_accelerometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-accelerometer-object">iowa_client_remove_accelerometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-accelerometer-update-axis">iowa_client_accelerometer_update_axis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#access-control-list-object-api">Access Control List Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-acl-rights-server-set">iowa_client_acl_rights_server_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-acl-rights-server-clear">iowa_client_acl_rights_server_clear</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-acl-rights-object-clear">iowa_client_acl_rights_object_clear</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#apn-connection-profile-object-api">APN Connection Profile Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#data-structures-and-constants">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id227">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id229">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#at-command-object-api">AT Command Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id264">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id267">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#bearer-selection-object-api">Bearer Selection Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id285">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id286">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id288">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#cellular-connectivity-object-api">Cellular Connectivity Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id306">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id307">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id309">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#connectivity-monitoring-object-api">Connectivity Monitoring Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id327">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id328">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#connectivity-statistics-object-api">Connectivity Statistics Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-connectivity-stats-object">iowa_client_add_connectivity_stats_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-connectivity-stats-object">iowa_client_remove_connectivity_stats_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-connectivity-stats-update-sms">iowa_client_connectivity_stats_update_sms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-connectivity-stats-update-ip-data">iowa_client_connectivity_stats_update_ip_data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#digital-output-object-api">Digital Output Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id369">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id371">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#dimmer-object-api">Dimmer Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id388">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id390">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#firmware-update-object-api">Firmware Update Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id412">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id413">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id415">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#gps-object-api">GPS Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-gps-object">iowa_client_add_gps_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-gps-object">iowa_client_remove_gps_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-gps-update-location">iowa_client_gps_update_location</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-gps-update-location-full">iowa_client_gps_update_location_full</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#gyrometer-object-api">Gyrometer Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-gyrometer-object">iowa_client_add_gyrometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-gyrometer-object">iowa_client_remove_gyrometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-gyrometer-update-axis">iowa_client_gyrometer_update_axis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#ipso-objects">IPSO Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-ipso-add-sensor">iowa_client_IPSO_add_sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-ipso-update-value">iowa_client_IPSO_update_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-ipso-update-values">iowa_client_IPSO_update_values</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-ipso-remove-sensor">iowa_client_IPSO_remove_sensor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#ligth-control-object-api">Ligth Control Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id494">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id496">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#location-object-api">Location Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-location-object">iowa_client_add_location_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-location-object">iowa_client_remove_location_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-location-update">iowa_client_location_update</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-location-update-full">iowa_client_location_update_full</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#magnetometer-object-api">Magnetometer Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-add-magnetometer-object">iowa_client_add_magnetometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-remove-magnetometer-object">iowa_client_remove_magnetometer_object</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#iowa-client-magnetometer-update-values">iowa_client_magnetometer_update_values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#software-component-object-api">Software Component Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id551">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id552">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id555">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#software-management-object-api">Software Management Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id583">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id584">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id587">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ClientAPI.html#mqtt-object-api">MQTT Object API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id619">Data Structures and Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id620">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClientAPI.html#id621">API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ServerAPI.html">Server Mode API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ServerAPI.html#server-pseudo-code">Server pseudo code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ServerAPI.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-supported-format-t">iowa_supported_format_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-lwm2m-protocol-version-t">iowa_lwm2m_protocol_version_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-client-t">iowa_client_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ServerAPI.html#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-result-callback-t">iowa_result_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-monitor-callback-t">iowa_monitor_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-resource-type-callback-t">iowa_resource_type_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-verify-client-callback-t">iowa_verify_client_callback_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ServerAPI.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-configure">iowa_server_configure</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-set-verify-client-callback">iowa_server_set_verify_client_callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-new-incoming-connection">iowa_server_new_incoming_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-configure-data-push">iowa_server_configure_data_push</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-read">iowa_server_read</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-observe">iowa_server_observe</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-observe-cancel">iowa_server_observe_cancel</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-write">iowa_server_write</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-write-attributes-string">iowa_server_write_attributes_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-dm-exec">iowa_server_dm_exec</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-dm-create">iowa_server_dm_create</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-dm-delete">iowa_server_dm_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-dm-discover">iowa_server_dm_discover</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-set-response-format">iowa_server_set_response_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-set-payload-format">iowa_server_set_payload_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-create-registration-update-trigger-message">iowa_server_create_registration_update_trigger_message</a></li>
<li class="toctree-l3"><a class="reference internal" href="ServerAPI.html#iowa-server-close-client-connection">iowa_server_close_client_connection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BootstrapServerAPI.html">Bootstrap Server Mode API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BootstrapServerAPI.html#bootstrap-server-pseudo-code">Bootstrap Server pseudo code</a></li>
<li class="toctree-l2"><a class="reference internal" href="BootstrapServerAPI.html#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-result-callback-t">iowa_bootstrap_result_callback_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="BootstrapServerAPI.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-configure">iowa_bootstrap_server_configure</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-new-incoming-connection">iowa_bootstrap_server_new_incoming_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-read">iowa_bootstrap_server_read</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-write">iowa_bootstrap_server_write</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-delete">iowa_bootstrap_server_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-discover">iowa_bootstrap_server_discover</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-finish">iowa_bootstrap_server_finish</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-add-server">iowa_bootstrap_server_add_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-remove-server">iowa_bootstrap_server_remove_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-add-bootstrap-server">iowa_bootstrap_server_add_bootstrap_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="BootstrapServerAPI.html#iowa-bootstrap-server-remove-bootstrap-server">iowa_bootstrap_server_remove_bootstrap_server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UtilsAPI.html">Utils API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="UtilsAPI.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-list-t">iowa_list_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="UtilsAPI.html#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-list-node-free-callback-t">iowa_list_node_free_callback_t</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-list-node-find-callback-t">iowa_list_node_find_callback_t</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="UtilsAPI.html#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-base64-get-encoded-size">iowa_utils_base64_get_encoded_size</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-base64-get-decoded-size">iowa_utils_base64_get_decoded_size</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-base64-encode">iowa_utils_base64_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-base64-decode">iowa_utils_base64_decode</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-uri-to-sensor">iowa_utils_uri_to_sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-sensor-to-uri">iowa_utils_sensor_to_uri</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-list-add">iowa_utils_list_add</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-list-remove">iowa_utils_list_remove</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-list-free">iowa_utils_list_free</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-list-find">iowa_utils_list_find</a></li>
<li class="toctree-l3"><a class="reference internal" href="UtilsAPI.html#iowa-utils-list-find-and-remove">iowa_utils_list_find_and_remove</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="UtilsAPI.html#example-linked-list-usage">Example: Linked List usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DeprecatedAPI.html">Deprecated API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="DeprecatedAPI.html#deprecated-compilation-flags">Deprecated Compilation Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#iowa-single-connection-mode">IOWA_SINGLE_CONNECTION_MODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#lwm2m-single-server-mode">LWM2M_SINGLE_SERVER_MODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#lwm2m-old-content-format-support">LWM2M_OLD_CONTENT_FORMAT_SUPPORT</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#iowa-lorawan-minimal-support">IOWA_LORAWAN_MINIMAL_SUPPORT</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#lwm2m-notification-queue-size">LWM2M_NOTIFICATION_QUEUE_SIZE</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#lwm2m-storage-queue-peek-support">LWM2M_STORAGE_QUEUE_PEEK_SUPPORT</a></li>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#lwm2m-features-removal">LwM2M features removal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DeprecatedAPI.html#deprecated-enumeration-values">Deprecated Enumeration Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#iowa-ipso-level-control">IOWA_IPSO_LEVEL_CONTROL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DeprecatedAPI.html#deprecated-api">Deprecated API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="DeprecatedAPI.html#iowa-server-configuration-set">iowa_server_configuration_set</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OpenSourceLicenses.html">Appendix A</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iowa (Lite version)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Device Update</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/iowa_docs/DeviceUpdate.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="device-update">
<h1>Device Update<a class="headerlink" href="#device-update" title="Permalink to this headline">¶</a></h1>
<div class="section" id="firmware-update">
<h2>Firmware Update<a class="headerlink" href="#firmware-update" title="Permalink to this headline">¶</a></h2>
<p>In LightweightM2M, the Firmware Update mechanism is used to deliver a Firmware Package to a LwM2M Client. There is no constraint on the format of the Firmware Package.</p>
<p>A LwM2M Client supporting Firmware Update exposes to the LwM2M Server the [<code class="docutils literal notranslate"><span class="pre">Firmware</span> <span class="pre">Update</span> <span class="pre">Object</span></code>][Firmware Update Object].</p>
<p>The Firmware Update mechanism is a state machine as summarized below:</p>
<p><img alt="Firmware Update State Machine" src="../_images/FWU_StateMachine.png" /></p>
<p>To update the firmware of a LwM2M Client, the LwM2M Server first chooses the delivery method to use by reading the LwM2M Client’s Delivery Method (<code class="docutils literal notranslate"><span class="pre">/5/0/9</span></code>). This resource indicates the delivery methods supported by the LwM2M Client:</p>
<ul class="simple">
<li><p>The “pull” method
: The LwM2M Server writes an URI on the LwM2M Client’s Package URI (<code class="docutils literal notranslate"><span class="pre">/5/0/1</span></code>). The LwM2M Client then downloads the Firmware Package from this URI using an alternate mechanism e.g. FTP or HTTP.</p></li>
<li><p>The “push” method
: The LwM2M Server writes the Firmware Package on the LwM2M Client’s Package (<code class="docutils literal notranslate"><span class="pre">/5/0/0</span></code>).</p></li>
</ul>
<p>It is advised for the LwM2M Server to start an observation of the LwM2M Client’s resources State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) and Result (<code class="docutils literal notranslate"><span class="pre">/5/0/5</span></code>) to be informed of the progress of the LwM2M Client.</p>
<p>Assuming the LwM2M Client is in Idle state (value of <code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>), the LwM2M Server starts the delivery of the Firmware Package:</p>
<ul class="simple">
<li><p>“pull” method
: The LwM2M Server writes the URI of the Firmware Package in LwM2M Client’s Package URI (<code class="docutils literal notranslate"><span class="pre">/5/0/1</span></code>).
: The State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) changes to Downloading (<code class="docutils literal notranslate"><span class="pre">1</span></code>), meaning the LwM2M Client starts to download the Firmware Package.
: The LwM2M Server now waits for the State to change to Downloaded (<code class="docutils literal notranslate"><span class="pre">2</span></code>), meaning the download completed successfully and the Firmware Package is valid.</p></li>
<li><p>“push” method
: The LwM2M Server writes the content of the Firmware Package in LwM2M Client’s Package (<code class="docutils literal notranslate"><span class="pre">/5/0/0</span></code>). At the end of the write, the State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) changes to Downloaded (<code class="docutils literal notranslate"><span class="pre">2</span></code>), meaning the Firmware Package is valid.
: Note that the State may change to Downloading (<code class="docutils literal notranslate"><span class="pre">1</span></code>) during the write if it takes time.</p></li>
</ul>
<p>In both methods, in case of error, the State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) becomes Idle (<code class="docutils literal notranslate"><span class="pre">0</span></code>) and the reason of the error is indicated by Result (<code class="docutils literal notranslate"><span class="pre">/5/0/5</span></code>):</p>
<ul class="simple">
<li><p>2: Not enough flash memory for the new firmware package.</p></li>
<li><p>3: Out of RAM during downloading process.</p></li>
<li><p>4: Connection lost during downloading process.</p></li>
<li><p>5: Integrity check failure for new downloaded package.</p></li>
<li><p>6: Unsupported package type.</p></li>
<li><p>7: Invalid URI</p></li>
<li><p>9: Unsupported protocol.</p></li>
</ul>
<p>Now the LwM2M Client is in Downloaded state, meaning that it contains the new Firmware Package. The LwM2M Server triggers the update by sending an Execute command on Update (<code class="docutils literal notranslate"><span class="pre">/5/0/2</span></code>). The State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) changes to Updating (<code class="docutils literal notranslate"><span class="pre">3</span></code>).</p>
<p>In case of error, the State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) reverts to Downloaded (<code class="docutils literal notranslate"><span class="pre">2</span></code>) and the Result (<code class="docutils literal notranslate"><span class="pre">/5/0/5</span></code>) changes to Firmware Update Failed (<code class="docutils literal notranslate"><span class="pre">8</span></code>).</p>
<p>In case of success, the State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) changes to Idle (<code class="docutils literal notranslate"><span class="pre">0</span></code>) and the Result (<code class="docutils literal notranslate"><span class="pre">/5/0/5</span></code>) changes to Firmware Updated Successfully (<code class="docutils literal notranslate"><span class="pre">1</span></code>).</p>
<p>Note that the firmware update may require the LwM2M Client to reboot. In this case, after the reboot, the LwM2M Client registers to the LwM2M Server and the previous observations are no longer valid. In this case, the LwM2M Server must read State (<code class="docutils literal notranslate"><span class="pre">/5/0/3</span></code>) and Result (<code class="docutils literal notranslate"><span class="pre">/5/0/5</span></code>) to determine if the update was successful.</p>
<p>When the LwM2M Client is in Downloaded state, the LwM2M Server may delete the stored Firmware Package by writing a zero-length value to the resource Package (<code class="docutils literal notranslate"><span class="pre">/5/0/0</span></code>) or Package URI (<code class="docutils literal notranslate"><span class="pre">/5/0/1</span></code>).</p>
<div class="section" id="firmware-update-using-iowa">
<h3>Firmware Update using IOWA<a class="headerlink" href="#firmware-update-using-iowa" title="Permalink to this headline">¶</a></h3>
<p>The API [<code class="docutils literal notranslate"><span class="pre">iowa_client_firmware_update_configure()</span></code>][iowa_client_firmware_update_configure] allows an IOWA Client to support the LwM2M Firmware Update.</p>
<p>The compilation flag [<strong>IOWA_SUPPORT_FIRMWARE_UPDATE_OBJECT</strong>][IOWA_SUPPORT_FIRMWARE_UPDATE_OBJECT] must be set.</p>
<p>This API requires a delivery callback. It is either a “download callback” for the “pull” method or a “write callback” for the “push” method. Of course, the IOWA Client can support both methods by providing two callbacks.</p>
<p>The API also requires an “update callback”. The IOWA stack takes care of the implementation of the [<code class="docutils literal notranslate"><span class="pre">Firmware</span> <span class="pre">Update</span> <span class="pre">Object</span></code>][Firmware Update Object] and its associated state machine. The user-provided callbacks are called as illustrated below:</p>
<div class="section" id="pull-method">
<h4>“Pull” method<a class="headerlink" href="#pull-method" title="Permalink to this headline">¶</a></h4>
<p>The “download callback” and the “update callback” should start an independent task to keep the IOWA Client responsive to the LwM2M Server’s requests. Both these callbacks inform the IOWA Stack of their success or failure by calling the API [<code class="docutils literal notranslate"><span class="pre">iowa_client_firmware_update_set_status()</span></code>][iowa_client_firmware_update_set_status].</p>
<p><img alt="Firmware Update Pull Sequence" src="../_images/FWU_PullSequence.png" /></p>
</div>
<div class="section" id="push-method">
<h4>“Push” method<a class="headerlink" href="#push-method" title="Permalink to this headline">¶</a></h4>
<p>The “write callback” is called with the Firmware Package received from the Server.</p>
<p>As the Firmware Package is usually bigger than the network MTU, it is advised to enable the [<strong>IOWA_COAP_BLOCK_MINIMAL_SUPPORT</strong>][Additional flags] compilation flag.  Then the Firmware Package can be received in several chunks. In this case, the “write callback” is called several times. However, the data is always provided in sequence with no gaps nor duplicates.</p>
<p>Additionally, the flag [<strong>IOWA_FIRMWARE_UPDATE_MAX_BLOCK_INTERVAL</strong>][IOWA_FIRMWARE_UPDATE_MAX_BLOCK_INTERVAL] can be set to define the maximum time in seconds to wait between block reception. If this delay expires, the Firmware Update state machine resets to the Idle state with a Connection Lost error.<br />If this flag is not set, IOWA will wait indefinitely for the next block. This is useful for device with intermittent connectivity.</p>
<p><img alt="Firmware Update Push Sequence" src="../_images/FWU_PushSequence.png" /></p>
<p>Below an example in pseudo-code of the Client to support both Firmware Update methods without using Multithread:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;iowa_client.h&quot;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">prv_downloadCallback</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">uri</span><span class="p">,</span>
                                 <span class="kt">void</span> <span class="o">*</span><span class="n">userData</span><span class="p">,</span>
                                 <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">DOWNLOAD_PACKAGE</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">iowa_client_firmware_update_set_status</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">IOWA_FW_STATUS_SUCCESSFUL</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// Set the error. Possible value:</span>
        <span class="c1">// - IOWA_FW_STATUS_OUT_OF_STORAGE</span>
        <span class="c1">// - IOWA_FW_STATUS_OUT_OF_MEMORY</span>
        <span class="c1">// - IOWA_FW_STATUS_CONNECTION_LOST</span>
        <span class="c1">// - IOWA_FW_STATUS_INVALID_URI</span>
        <span class="c1">// - IOWA_FW_STATUS_UNSUPPORTED_PROTOCOL</span>

        <span class="n">iowa_client_firmware_update_set_status</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="cm">/* ERROR */</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">iowa_fw_status_t</span> <span class="nf">prv_writeCallback</span><span class="p">(</span><span class="n">iowa_fw_write_cmd_t</span> <span class="n">cmd</span><span class="p">,</span>
                                          <span class="kt">size_t</span> <span class="n">dataLength</span><span class="p">,</span>
                                          <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
                                          <span class="kt">void</span> <span class="o">*</span><span class="n">userData</span><span class="p">,</span>
                                          <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">iowa_fw_status_t</span> <span class="n">status</span><span class="p">;</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">IOWA_FW_STATUS_SUCCESSFUL</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="nl">IOWA_FW_PACKAGE_RESET</span><span class="p">:</span>
        <span class="c1">// Reset the package</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">IOWA_FW_PACKAGE_WRITE</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">WRITE_PACKAGE</span><span class="p">(</span><span class="n">dataLength</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Set the error. Possible value:</span>
            <span class="c1">// - IOWA_FW_STATUS_OUT_OF_STORAGE</span>
            <span class="c1">// - IOWA_FW_STATUS_OUT_OF_MEMORY</span>
            <span class="c1">// - IOWA_FW_STATUS_INTEGRITY_CHECK_FAILURE</span>
            <span class="c1">// - IOWA_FW_STATUS_UNSUPPORTED_TYPE</span>

            <span class="n">status</span> <span class="o">=</span> <span class="cm">/* ERROR */</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="c1">// This should not happen</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">status</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">prv_updateCallback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">userData</span><span class="p">,</span>
                               <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">UPDATE_PACKAGE</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">iowa_client_firmware_update_set_status</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">IOWA_FW_STATUS_SUCCESSFUL</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">iowa_client_firmware_update_set_status</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">IOWA_FW_STATUS_UPDATE_FAILED</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span>
         <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">iowa_context_t</span> <span class="n">iowaH</span><span class="p">;</span>
    <span class="n">iowa_status_t</span> <span class="n">result</span><span class="p">;</span>

    <span class="cm">/******************</span>
<span class="cm">     * Initialization</span>
<span class="cm">     */</span>

    <span class="n">iowaH</span> <span class="o">=</span> <span class="n">iowa_init</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

    <span class="n">iowa_client_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="s">&quot;IOWA_FU_Client&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="n">iowa_client_firmware_update_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                          <span class="nb">NULL</span><span class="p">,</span>
                                          <span class="nb">NULL</span><span class="p">,</span>
                                          <span class="n">prv_downloadCallback</span><span class="p">,</span>
                                          <span class="n">prv_writeCallback</span><span class="p">,</span>
                                          <span class="n">prv_updateCallback</span><span class="p">,</span>
                                          <span class="nb">NULL</span><span class="p">);</span>

    <span class="n">iowa_client_add_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                           <span class="mi">1234</span><span class="p">,</span>
                           <span class="s">&quot;coap://localhost:5683&quot;</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="n">IOWA_SEC_NONE</span><span class="p">);</span>

    <span class="cm">/******************</span>
<span class="cm">     * &quot;Main loop&quot;</span>
<span class="cm">     */</span>

    <span class="k">do</span>
    <span class="p">{</span>
        <span class="c1">// Run for 4 seconds</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_step</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">)</span>

    <span class="n">iowa_client_remove_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">1234</span><span class="p">);</span>
    <span class="n">iowa_close</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="software-management">
<h2>Software Management<a class="headerlink" href="#software-management" title="Permalink to this headline">¶</a></h2>
<p>In LightweightM2M, the Software Management mechanism is used to install software package and/or activate Software Components to a LwM2M Client.</p>
<p>A LwM2M Client supporting Software Management exposes to the LwM2M Server the [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Management</span> <span class="pre">Object</span></code>][Software Management Object].</p>
<p>The [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Management</span> <span class="pre">Object</span></code>][Software Management Object] only allows to install/uninstall a software. To allow the activation/deactivation of a Software Component the LwM2M Client must support [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Component</span> <span class="pre">Object</span></code>][Software Component Object].</p>
<div class="section" id="software-management-mechanism">
<h3>Software Management mechanism<a class="headerlink" href="#software-management-mechanism" title="Permalink to this headline">¶</a></h3>
<p>The Software Management mechanism is split in two sub-processes :</p>
<ul class="simple">
<li><p>The Package Installation, manages all the operations performed to install a software (Download, Check, Install, Uninstall).</p></li>
<li><p>The Software Activation, allows the use of an installed software (Activation, Deactivation) if [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Component</span> <span class="pre">Object</span></code>][Software Component Object] is supported.</p></li>
</ul>
<div class="section" id="package-installation">
<h4>Package Installation<a class="headerlink" href="#package-installation" title="Permalink to this headline">¶</a></h4>
<p>The Package Installation process is a state machine as summarized below:</p>
<p><img alt="Package Installation State Machine" src="../_images/SWMGMT_PackageInstallationStateMachine.png" /></p>
<div class="section" id="download-software">
<h5>Download software<a class="headerlink" href="#download-software" title="Permalink to this headline">¶</a></h5>
<p>To download a software of a LwM2M Client, the LwM2M Server has two possible methods:</p>
<ul class="simple">
<li><p>The “pull” method
: The LwM2M Server writes an URI on the LwM2M Client’s Package URI (<code class="docutils literal notranslate"><span class="pre">/9/x/3</span></code>). The LwM2M Client then downloads the software Package from this URI using an alternate mechanism e.g. FTP or HTTP.
: With this method, LwM2M Client can use a User Name (<code class="docutils literal notranslate"><span class="pre">/9/x/14</span></code>) and a Password (<code class="docutils literal notranslate"><span class="pre">/9/x/15</span></code>) for identification.</p></li>
<li><p>The “push” method
: The LwM2M Server writes the software Package on the LwM2M Client’s Package (<code class="docutils literal notranslate"><span class="pre">/9/x/2</span></code>).</p></li>
</ul>
<p>It is advised for the LwM2M Server to start an observation of the LwM2M Client’s resources State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) and Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) to be informed of the progress of the LwM2M Client.</p>
<p>If the LwM2M Client is in Initial state (value of <code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>), the LwM2M Server can start the delivery of the software package. This means that the software is not installed and that the system is ready to start a download:</p>
<ul class="simple">
<li><p>“pull” method
: The LwM2M Server writes the URI of the software Package in LwM2M Client’s Package URI (<code class="docutils literal notranslate"><span class="pre">/9/x/3</span></code>).</p></li>
<li><p>“push” method
: The LwM2M Server writes the content of the software Package in LwM2M Client’s Package (<code class="docutils literal notranslate"><span class="pre">/9/x/2</span></code>).</p></li>
</ul>
<p>In both methods, the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) change to Downloading (<code class="docutils literal notranslate"><span class="pre">1</span></code>), meaning the LwM2M Client starts to download the software Package. The Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) should be also at Downloading (<code class="docutils literal notranslate"><span class="pre">1</span></code>).</p>
<p>The LwM2M Server now waits for the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) to change to Delivered (<code class="docutils literal notranslate"><span class="pre">3</span></code>), meaning the download completed successfully and the software Package is valid. The Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) should indicates Successfully Downloaded (<code class="docutils literal notranslate"><span class="pre">3</span></code>).</p>
<p>Note that the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) may change to Downloaded (<code class="docutils literal notranslate"><span class="pre">2</span></code>), meaning the download completed successfully.</p>
<p>In case of error, the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) becomes Initial (<code class="docutils literal notranslate"><span class="pre">0</span></code>) and the reason of the error is indicated by Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>):</p>
<ul class="simple">
<li><p>50: Not enough flash memory for the new software package.</p></li>
<li><p>51: Out of RAM during downloading process.</p></li>
<li><p>52: Connection lost during downloading process.</p></li>
<li><p>53: Integrity check failure for new downloaded package.</p></li>
<li><p>54: Unsupported package type.</p></li>
<li><p>56: Invalid URI (only in “pull” method).</p></li>
<li><p>57: Device defined update error.</p></li>
</ul>
</div>
<div class="section" id="install-uninstall-software">
<h5>Install/Uninstall software<a class="headerlink" href="#install-uninstall-software" title="Permalink to this headline">¶</a></h5>
<p>Once the LwM2M Client is in Delivered state, meaning that it contains the new software Package. The LwM2M Server can start the software installation, by sending an Execute command on Install (<code class="docutils literal notranslate"><span class="pre">/9/x/4</span></code>):</p>
<ul class="simple">
<li><p>In case of success, the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) changes to Installed (<code class="docutils literal notranslate"><span class="pre">4</span></code>) and the Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) indicates Successfully Installed (<code class="docutils literal notranslate"><span class="pre">2</span></code>).</p></li>
<li><p>In case of error, the State remains and the Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) indicates Installation failure (<code class="docutils literal notranslate"><span class="pre">58</span></code>).</p></li>
</ul>
<p>If the LwM2M Client is in Delivered state or Installed state, The LwM2M Server can start the software uninstallation, by sending an Execute command on Uninstall (<code class="docutils literal notranslate"><span class="pre">/9/x/6</span></code>):</p>
<ul class="simple">
<li><p>In any case, the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) changes to Initial (<code class="docutils literal notranslate"><span class="pre">0</span></code>) and the Result (<code class="docutils literal notranslate"><span class="pre">/9/x/9</span></code>) indicates Initial value (<code class="docutils literal notranslate"><span class="pre">0</span></code>) or Uninstallation failure (<code class="docutils literal notranslate"><span class="pre">59</span></code>).</p></li>
</ul>
</div>
</div>
<div class="section" id="software-activation">
<h4>Software Activation<a class="headerlink" href="#software-activation" title="Permalink to this headline">¶</a></h4>
<p>The Software Activation process is a state machine as summarized below:</p>
<p><img alt="Software Activation State Machine" src="../_images/SWMGMT_SoftwareActivationStateMachine.png" /></p>
<p>This state machine is only alive if software is installed, meaning that the State (<code class="docutils literal notranslate"><span class="pre">/9/x/7</span></code>) has the Installed value (<code class="docutils literal notranslate"><span class="pre">4</span></code>).
The activation process is only available if at least one [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Component</span> <span class="pre">Object</span></code>][Software Component Object] is link to the [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Management</span> <span class="pre">Object</span></code>][Software Management Object]. This link can be seen with the Software Component Link resource provided (<code class="docutils literal notranslate"><span class="pre">/9/x/17</span></code>).</p>
<p>When the state machine is not alive, its state (<code class="docutils literal notranslate"><span class="pre">/9/x/12</span></code>) is Inactive state (<code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
<ul class="simple">
<li><p>To pass in Active state (<code class="docutils literal notranslate"><span class="pre">true</span></code>), the LwM2M Server should send an Execute command on Activate (<code class="docutils literal notranslate"><span class="pre">/9/x/10</span></code>).</p></li>
<li><p>To pass in Inactive state (<code class="docutils literal notranslate"><span class="pre">false</span></code>), the LwM2M Server should send an Execute command on Deactivate (<code class="docutils literal notranslate"><span class="pre">/9/x/11</span></code>).</p></li>
</ul>
<p>This will activate/deactivate each Software Component linked, if activated resources are provide (<code class="docutils literal notranslate"><span class="pre">/14/x/3</span></code>, <code class="docutils literal notranslate"><span class="pre">/14/x/4</span></code>, <code class="docutils literal notranslate"><span class="pre">/14/x/5</span></code>).
The state of each Software Component linked can be seen with the activation state resource (<code class="docutils literal notranslate"><span class="pre">/14/x/5</span></code>).
Even if the Software management object activate/deactivate its Software components linked, each Software component object can be activate/deactivate separately with:</p>
<ul class="simple">
<li><p>an Execute command on Activate (<code class="docutils literal notranslate"><span class="pre">/14/x/3</span></code>) send by the LwM2M Server will set the Software Component state (<code class="docutils literal notranslate"><span class="pre">/14/x/5</span></code>) to Activate (<code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></li>
<li><p>an Execute command on Deactivate (<code class="docutils literal notranslate"><span class="pre">/14/x/4</span></code>) send by the LwM2M Server will set the Software Component state (<code class="docutils literal notranslate"><span class="pre">/14/x/5</span></code>) to Deactivate (<code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></li>
</ul>
<p>\clearpage</p>
</div>
</div>
<div class="section" id="software-management-using-iowa">
<h3>Software Management using IOWA<a class="headerlink" href="#software-management-using-iowa" title="Permalink to this headline">¶</a></h3>
<p>The [<code class="docutils literal notranslate"><span class="pre">iowa_client_enable_software_package_management()</span></code>][iowa_client_enable_software_package_management] API allows an IOWA Client to support the LwM2M Software Management feature.</p>
<p>This API allows users to get modifications (create or delete) by LwM2M Server with the “update callback”. This API requires a delivery callback. It is either a “download callback” for the “pull” method or a “write callback” for the “push” method. Of course, the IOWA Client can support both methods by providing two callbacks. The API also requires an “install callback”.</p>
<p>The IOWA stack takes care of the implementation of the [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Management</span> <span class="pre">Object</span></code>][Software Management Object] and its associated state machine.</p>
<p>The [<code class="docutils literal notranslate"><span class="pre">iowa_client_add_software_package()</span></code>][iowa_client_add_software_package] API must be called to instantiate each Software Management element needed.</p>
<p>For a Software Management element, the users-provided callbacks are called as illustrated below:</p>
<p><img alt="Software Download/Write Sequence" src="../_images/SWMGMT_Sequence.png" /></p>
<ul class="simple">
<li><p>The “download callback” is called in case of Write on “Package URI” whereas the “write callback” is called in case of Write on “Package”.</p>
<ul>
<li><p>“pull” method
: The “download callback” should start an independent task to keep the IOWA Client responsive to the LwM2M Server’s requests. This callback inform the IOWA Stack of its success or failure by calling the [<code class="docutils literal notranslate"><span class="pre">iowa_client_set_software_package_command_result()</span></code>][iowa_client_set_software_package_command_result] API:</p>
<ul>
<li><p>When packet is downloaded, it should call [<code class="docutils literal notranslate"><span class="pre">iowa_client_set_software_package_command_result()</span></code>][iowa_client_set_software_package_command_result] with IOWA_SW_PKG_UPDATE_RESULT_DOWNLOADING_SUCCESSFUL result if success or error result.</p></li>
<li><p>When packet is verified, it should call [<code class="docutils literal notranslate"><span class="pre">iowa_client_set_software_package_command_result()</span></code>][iowa_client_set_software_package_command_result] with IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL result if success or error result.</p></li>
</ul>
</li>
<li><p>“push” method
: As the software management package can be received in several chunks, the “write callback” may be called several times. However, the data is always provided in sequence with no gaps nor duplicates. This callback inform the IOWA Stack of its success by returning IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL or failure by returning error result.</p></li>
</ul>
</li>
</ul>
<p><img alt="Software Install Sequence" src="../_images/SWMGMT_InstallSequence.png" /></p>
<ul class="simple">
<li><p>The “install callback” is called in case of Execute on “Install” when package has been delivered.</p></li>
<li><p>The “install callback” can also be called in case of Execute on “Uninstall” when package has been delivered or installed.</p></li>
</ul>
<p>The “install callback” should start an independent task to keep the IOWA Client responsive to the LwM2M Server’s requests. This callback inform the IOWA Stack of its success or failure by calling the [<code class="docutils literal notranslate"><span class="pre">iowa_client_set_software_package_command_result()</span></code>][iowa_client_set_software_package_command_result] API.</p>
<p>To remove a Software Management element, the [<code class="docutils literal notranslate"><span class="pre">iowa_client_remove_software_package()</span></code>][iowa_client_remove_software_package] API can be called.</p>
<p>To remove the entire Software Management feature, the [<code class="docutils literal notranslate"><span class="pre">iowa_client_disable_software_package_management()</span></code>][iowa_client_disable_software_package_management] API can be called.</p>
<p>Also, the LwM2M Client can update the state of any Software Management element by calling the [<code class="docutils literal notranslate"><span class="pre">iowa_client_software_package_update_state()</span></code>][iowa_client_software_package_update_state] API.</p>
<p>To be able to use the Activation process, Software Components must have been provided.</p>
<p>\clearpage</p>
<div class="section" id="software-component-using-iowa">
<h4>Software Component using IOWA<a class="headerlink" href="#software-component-using-iowa" title="Permalink to this headline">¶</a></h4>
<p>The [<code class="docutils literal notranslate"><span class="pre">iowa_client_enable_software_component()</span></code>][iowa_client_enable_software_component] API allows an IOWA Client to support the LwM2M Software Component feature.</p>
<p>This API requires an “activate callback”.</p>
<p>The IOWA stack takes care of the implementation of the [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Component</span> <span class="pre">Object</span></code>][Software Component Object] and its associated state machine linked with the [<code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">Management</span> <span class="pre">Object</span></code>][Software Management Object].</p>
<p>For a Software Component element, the users-provided callback is called as illustrated below:</p>
<p><img alt="Software Activation Sequence" src="../_images/SWCMP_Sequence.png" /></p>
<ul class="simple">
<li><p>The “activate callback” is called in case of Execute on “Activate” or “Deactivate” when package is installed.</p></li>
</ul>
<p>If linked with a Software Management Object, the users-provided callback can also be called as illustrated below:</p>
<p><img alt="Software Activation Sequence linked with Software Management" src="../_images/SWMGMT_SWCMP_Sequence.png" /></p>
<ul class="simple">
<li><p>For each Software Component linked to the Software Management object, the Software Component’s “activate callback” is called in case of Execute on “Activate” or “Deactivate” when Software Management object’s package is installed.</p></li>
</ul>
<p>The [<code class="docutils literal notranslate"><span class="pre">iowa_client_add_software_component()</span></code>][iowa_client_add_software_component] API must be called to instantiate each Software Component element needed. This API will return <em>id</em>, to link a Software Component to a Software Management, this <em>id</em> must be passed to [<code class="docutils literal notranslate"><span class="pre">iowa_client_add_software_package()</span></code>][iowa_client_add_software_package] API at start. To set the Software Component activation state, the [<code class="docutils literal notranslate"><span class="pre">iowa_client_software_component_update_state()</span></code>][iowa_client_software_component_update_state] API can be called.</p>
<p>\clearpage</p>
<p>Below an example in pseudo-code of the Client to support both Software Management methods and Software Component methods without using Multithread:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;iowa_software_management.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;iowa_software_component.h&quot;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">prv_downloadCallback</span><span class="p">(</span><span class="n">iowa_sensor_t</span> <span class="n">id</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">uriP</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">userNameP</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">passwordP</span><span class="p">,</span>
                                 <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">,</span>
                                 <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">DOWNLOAD_PACKAGE</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_DOWNLOADING_SUCCESSFUL</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">CHECK_PACKAGE</span><span class="p">(</span><span class="n">userInfoP</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_INTEGRITY_CHECK_FAILURE</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Set the error. Possible value:</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_OUT_OF_STORAGE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_OUT_OF_MEMORY</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_CONNECTION_LOST</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_INTEGRITY_CHECK_FAILURE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_UNSUPPORTED_TYPE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_INVALID_URI</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_UPDATE_FAILED</span>

    <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="cm">/* ERROR */</span><span class="p">);</span>

<span class="p">}</span>

<span class="k">static</span> <span class="n">iowa_sw_pkg_result_t</span> <span class="nf">prv_writeCallback</span><span class="p">(</span><span class="n">iowa_sensor_t</span> <span class="n">id</span><span class="p">,</span>
                                              <span class="n">iowa_sw_pkg_write_cmd_t</span> <span class="n">cmd</span><span class="p">,</span>
                                              <span class="kt">size_t</span> <span class="n">dataLength</span><span class="p">,</span>
                                              <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">dataP</span><span class="p">,</span>
                                              <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">,</span>
                                              <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="nl">IOWA_SW_PKG_COMMAND_RESET</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">RESET_PACKAGE</span><span class="p">()</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">IOWA_SW_PKG_COMMAND_WRITE</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">WRITE_PACKAGE</span><span class="p">(</span><span class="n">dataLength</span><span class="p">,</span> <span class="n">dataP</span><span class="p">)</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="c1">// This should not happen</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Set the error. Possible value:</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_OUT_OF_STORAGE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_OUT_OF_MEMORY</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_CONNECTION_LOST</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_INTEGRITY_CHECK_FAILURE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_UNSUPPORTED_TYPE</span>
    <span class="c1">// - IOWA_SW_PKG_UPDATE_RESULT_UPDATE_FAILED</span>

    <span class="k">return</span> <span class="cm">/* ERROR */</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">prv_installCallback</span><span class="p">(</span><span class="n">iowa_sensor_t</span> <span class="n">id</span><span class="p">,</span>
                                <span class="n">iowa_sw_pkg_install_cmd_t</span> <span class="n">cmd</span><span class="p">,</span>
                                <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">,</span>
                                <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">cmd</span> <span class="o">==</span> <span class="n">IOWA_SW_PKG_COMMAND_INSTALL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">INSTALL_PACKAGE</span><span class="p">(</span><span class="n">userInfoP</span><span class="p">)</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_INSTALLED_FAILURE</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">UNINSTALL_PACKAGE</span><span class="p">(</span><span class="n">userInfoP</span><span class="p">)</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_UNINSTALLED_FAILURE</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">iowa_client_set_software_package_command_result</span><span class="p">(</span><span class="n">contextP</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">IOWA_SW_PKG_UPDATE_RESULT_SUCCESSFUL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">iowa_status_t</span> <span class="nf">prv_activateCallback</span><span class="p">(</span><span class="n">iowa_sensor_t</span> <span class="n">id</span><span class="p">,</span>
                                          <span class="kt">bool</span> <span class="n">activationState</span><span class="p">,</span>
                                          <span class="kt">void</span> <span class="o">*</span><span class="n">userDataP</span><span class="p">,</span>
                                          <span class="n">iowa_context_t</span> <span class="n">contextP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">activationState</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ACTIVATE_PACKAGE</span><span class="p">(</span><span class="n">userInfoP</span><span class="p">)</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">IOWA_COAP_400_BAD_REQUEST</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">DEACTIVATE_PACKAGE</span><span class="p">(</span><span class="n">userInfoP</span><span class="p">)</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">IOWA_COAP_400_BAD_REQUEST</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span>
         <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">iowa_context_t</span> <span class="n">iowaH</span><span class="p">;</span>
    <span class="n">iowa_status_t</span> <span class="n">result</span><span class="p">;</span>

    <span class="n">iowa_sw_pkg_optional_info_t</span> <span class="n">swMgmt</span><span class="p">;</span>
    <span class="n">iowa_sensor_t</span> <span class="n">softMgmtId</span><span class="p">;</span>
    <span class="n">iowa_sensor_t</span> <span class="n">softCmp1Id</span><span class="p">;</span>
    <span class="n">iowa_sensor_t</span> <span class="n">softCmp2Id</span><span class="p">;</span>
    <span class="n">iowa_sw_cmp_info_t</span> <span class="n">swCmp</span><span class="p">;</span>

    <span class="cm">/******************</span>
<span class="cm">     * Initialization</span>
<span class="cm">     */</span>

    <span class="n">iowaH</span> <span class="o">=</span> <span class="n">iowa_init</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

    <span class="n">iowa_client_configure</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="s">&quot;IOWA_SW_Client&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// Enable software management feature</span>
    <span class="n">iowa_client_enable_software_package_management</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                                   <span class="nb">NULL</span><span class="p">,</span>
                                                   <span class="n">prv_downloadCallback</span><span class="p">,</span>
                                                   <span class="n">prv_writeCallback</span><span class="p">,</span>
                                                   <span class="n">prv_installCallback</span><span class="p">,</span>
                                                   <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// Add software management instance</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_client_add_software_package</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                              <span class="s">&quot;soft1&quot;</span><span class="p">,</span>
                                              <span class="s">&quot;1.0&quot;</span><span class="p">,</span>
                                              <span class="nb">NULL</span><span class="p">,</span>
                                              <span class="o">&amp;</span><span class="n">softMgmtId</span><span class="p">);</span>

    <span class="c1">// Add software management instance</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_client_add_software_package</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                              <span class="s">&quot;soft2&quot;</span><span class="p">,</span>
                                              <span class="s">&quot;1.0&quot;</span><span class="p">,</span>
                                              <span class="nb">NULL</span><span class="p">,</span>
                                              <span class="o">&amp;</span><span class="n">softMgmtId</span><span class="p">);</span>

    <span class="c1">// Enable software component feature</span>
    <span class="n">iowa_client_enable_software_component</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                          <span class="n">prv_activateCallback</span><span class="p">,</span>
                                          <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// Add software component instance</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swCmp</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">iowa_sw_cmp_info_t</span><span class="p">));</span>
    <span class="n">swCmp</span><span class="p">.</span><span class="n">identityP</span> <span class="o">=</span> <span class="s">&quot;cmp1&quot;</span><span class="p">;</span>
    <span class="n">swCmp</span><span class="p">.</span><span class="n">versionP</span> <span class="o">=</span> <span class="s">&quot;1.1&quot;</span><span class="p">;</span>
    <span class="n">iowa_client_add_software_component</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                       <span class="o">&amp;</span><span class="n">swCmp</span><span class="p">,</span>
                                       <span class="nb">false</span><span class="p">,</span>
                                       <span class="o">&amp;</span><span class="n">softCmp1Id</span><span class="p">);</span>

    <span class="c1">// Add software component instance</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swCmp</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">iowa_sw_cmp_info_t</span><span class="p">));</span>
    <span class="n">swCmp</span><span class="p">.</span><span class="n">packP</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span><span class="s">&quot;cmp2&quot;</span><span class="p">;</span>
    <span class="n">swCmp</span><span class="p">.</span><span class="n">packLength</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">iowa_client_add_software_component</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                       <span class="o">&amp;</span><span class="n">swCmp</span><span class="p">,</span>
                                       <span class="nb">true</span><span class="p">,</span>
                                       <span class="o">&amp;</span><span class="n">softCmp2Id</span><span class="p">);</span>

    <span class="c1">// Add software management instance</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swMgmt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">iowa_sw_pkg_optional_info_t</span><span class="p">));</span>
    <span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkCount</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkP</span> <span class="o">=</span> <span class="p">(</span><span class="n">iowa_sensor_t</span> <span class="o">*</span><span class="p">)</span><span class="n">iowa_system_malloc</span><span class="p">(</span><span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkCount</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">iowa_sensor_t</span><span class="p">));</span>
    <span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">softCmp1Id</span><span class="p">;</span>
    <span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">softCmp2Id</span><span class="p">;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_client_add_software_package</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                                              <span class="s">&quot;soft3&quot;</span><span class="p">,</span>
                                              <span class="s">&quot;1.1&quot;</span><span class="p">,</span>
                                              <span class="o">&amp;</span><span class="n">swMgmt</span><span class="p">,</span>
                                              <span class="o">&amp;</span><span class="n">softMgmtId</span><span class="p">);</span>

    <span class="n">iowa_client_add_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span>
                           <span class="mi">1234</span><span class="p">,</span>
                           <span class="s">&quot;coap://localhost:5683&quot;</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="n">IOWA_SEC_NONE</span><span class="p">);</span>

    <span class="cm">/******************</span>
<span class="cm">     * &quot;Main loop&quot;</span>
<span class="cm">     */</span>

    <span class="k">do</span>
    <span class="p">{</span>
        <span class="c1">// Run for 4 seconds</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">iowa_step</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">IOWA_COAP_NO_ERROR</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkP</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">iowa_system_free</span><span class="p">(</span><span class="n">swMgmt</span><span class="p">.</span><span class="n">swComponentLinkP</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">iowa_client_disable_software_component</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>
    <span class="n">iowa_client_disable_software_package_management</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>
    <span class="n">iowa_client_remove_server</span><span class="p">(</span><span class="n">iowaH</span><span class="p">,</span> <span class="mi">1234</span><span class="p">);</span>
    <span class="n">iowa_close</span><span class="p">(</span><span class="n">iowaH</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, IoTerop

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>